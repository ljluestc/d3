#d3-brushBrushingistheinteractivespecificationaone-ortwo-dimensionalselectedregionusingapointinggesture,suchasbyclickinganddraggingthemouse.Brushingisoftenusedtoselectdiscreteelements,suchasdotsinascatterplotorfilesonadesktop.Itcanalsobeusedtozoom-intoaregionofinterest,ortoselectcontinuousregionsfor[cross-filteringdata](https://square.github.io/crossfilter/)orlivehistograms:[<imgalt="MonaLisaHistogram"src="https://raw.githubusercontent.com/d3/d3-brush/master/img/mona-lisa.jpg"width="420"height="219">](https://observablehq.com/@d3/mona-lisa-histogram)Thed3-brushmoduleimplementsbrushingformouseandtoucheventsusing[SVG](https://www.w3.org/TR/SVG/).Clickanddragonthebrushselectiontotranslatetheselection.Clickanddragononeoftheselectionhandlestomovethecorrespondingedge(oredges)oftheselection.Clickanddragontheinvisibleoverlaytodefineanewbrushselection,orclickanywherewithinthebrushableregionwhileholdingdowntheMETA(⌘)key.HoldingdowntheALT(⌥)keywhilemovingthebrushcausesittorepositionarounditscenter,whileholdingdownSPACElocksthecurrentbrushsize,allowingonlytranslation.Brushesalsosupportprogrammaticcontrol.Forexample,youcanlistento[*end*events](#brush-events),andtheninitiateatransitionwith[*brush*.move](#brush_move)tosnapthebrushselectiontosemanticboundaries:[<imgalt="BrushSnapping"src="https://raw.githubusercontent.com/d3/d3-brush/master/img/snapping.png"width="420"height="219">](https://observablehq.com/@d3/brush-snapping-transitions)Oryoucanhavethebrushrecenterwhenyouclickoutsidethecurrentselection:[<imgalt="Click-to-Recenter"src="https://raw.githubusercontent.com/d3/d3-brush/master/img/recenter.jpg"width="420"height="219">](https://observablehq.com/@d3/click-to-recenter-brush)##brush(){#brush}[Examples](https://observablehq.com/@d3/brushable-scatterplot)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·Createsanewtwo-dimensionalbrush.##brushX(){#brushX}[Examples](https://observablehq.com/@d3/focus-context)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·Createsanewone-dimensionalbrushalongthe*x*-dimension.##brushY(){#brushY}[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·Createsanewone-dimensionalbrushalongthe*y*-dimension.##*brush*(*group*){#_brush}[Examples](https://observablehq.com/@d3/brushable-scatterplot-matrix)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·Appliesthebrushtothespecified*group*,whichmustbea[selection](./d3-selection.md)ofSVG[Gelements](https://www.w3.org/TR/SVG/struct.html#Groups).Thisfunctionistypicallynotinvokeddirectly,andisinsteadinvokedvia[*selection*.call](./d3-selection/control-flow.md#selection_call).Forexample,torenderabrush:```jssvg.append("g").attr("class","brush").call(d3.brush().on("brush",brushed));```Internally,thebrushuses[*selection*.on](./d3-selection/events.md#selection_on)tobindthenecessaryeventlistenersfordragging.Thelistenersusethename`.brush`,soyoucansubsequentlyunbindthebrusheventlistenersasfollows:```jsgroup.on(".brush",null);```ThebrushalsocreatestheSVGelementsnecessarytodisplaythebrushselectionandtoreceiveinputeventsforinteraction.Youcanadd,removeormodifytheseelementsasdesiredtochangethebrushappearance;youcanalsoapplystylesheetstomodifythebrushappearance.Thestructureofatwo-dimensionalbrushisasfollows:```html<gclass="brush"fill="none"pointer-events="all"style="-webkit-tap-highlight-color:rgba(0,0,0,0);"><rectclass="overlay"pointer-events="all"cursor="crosshair"x="0"y="0"width="960"height="500"></rect><rectclass="selection"cursor="move"fill="#777"fill-opacity="0.3"stroke="#fff"shape-rendering="crispEdges"x="112"y="194"width="182"height="83"></rect><rectclass="handlehandle--n"cursor="ns-resize"x="107"y="189"width="192"height="10"></rect><rectclass="handlehandle--e"cursor="ew-resize"x="289"y="189"width="10"height="93"></rect><rectclass="handlehandle--s"cursor="ns-resize"x="107"y="272"width="192"height="10"></rect><rectclass="handlehandle--w"cursor="ew-resize"x="107"y="189"width="10"height="93"></rect><rectclass="handlehandle--nw"cursor="nwse-resize"x="107"y="189"width="10"height="10"></rect><rectclass="handlehandle--ne"cursor="nesw-resize"x="289"y="189"width="10"height="10"></rect><rectclass="handlehandle--se"cursor="nwse-resize"x="289"y="272"width="10"height="10"></rect><rectclass="handlehandle--sw"cursor="nesw-resize"x="107"y="272"width="10"height="10"></rect></g>```Theoverlayrectcoversthebrushableareadefinedby[*brush*.extent](#brush_extent).Theselectionrectcoverstheareadefinedbythecurrent[brushselection](#brushSelection).Thehandlerectscovertheedgesandcornersofthebrushselection,allowingthecorrespondingvalueinthebrushselectiontobemodifiedinteractively.Tomodifythebrushselectionprogrammatically,use[*brush*.move](#brush_move).##*brush*.move(*group*,*selection*,*event*){#brush_move}[Examples](https://observablehq.com/d/93b91f86f9ebc9b9)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·Setstheactive*selection*ofthebrushonthespecified*group*,whichmustbea[selection](./d3-selection.md)ora[transition](./d3-transition.md)ofSVG[Gelements](https://www.w3.org/TR/SVG/struct.html#Groups).The*selection*mustbedefinedasanarrayofnumbers,ornulltoclearthebrushselection.Fora[two-dimensionalbrush](#brush),itmustbedefinedas[[*x0*,*y0*],[*x1*,*y1*]],where*x0*istheminimum*x*-value,*y0*istheminimum*y*-value,*x1*isthemaximum*x*-value,and*y1*isthemaximum*y*-value.Foran[*x*-brush](#brushX),itmustbedefinedas[*x0*,*x1*];fora[*y*-brush](#brushY),itmustbedefinedas[*y0*,*y1*].Theselectionmayalsobespecifiedasafunctionwhichreturnssuchanarray;ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentdatum`d`andindex`i`,withthe`this`contextasthecurrentDOMelement.Thereturnedarraydefinesthebrushselectionforthatelement.##*brush*.clear(*group*,*event*){#brush_clear}[Examples](https://observablehq.com/@d3/double-click-brush-clear)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·Analiasfor[*brush*.move](#brush_move)withthenullselection.##*brush*.extent(*extent*){#brush_extent}[Examples](https://observablehq.com/@d3/brush-snapping)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·If*extent*isspecified,setsthebrushableextenttothespecifiedarrayofpoints[[*x0*,*y0*],[*x1*,*y1*]],where[*x0*,*y0*]isthetop-leftcornerand[*x1*,*y1*]isthebottom-rightcorner,andreturnsthisbrush.The*extent*mayalsobespecifiedasafunctionwhichreturnssuchanarray;ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentdatum`d`andindex`i`,withthe`this`contextasthecurrentDOMelement.If*extent*isnotspecified,returnsthecurrentextentaccessor,whichdefaultsto:```jsfunctiondefaultExtent(){varsvg=this.ownerSVGElement||this;if(svg.hasAttribute("viewBox")){svg=svg.viewBox.baseVal;return[[svg.x,svg.y],[svg.x+svg.width,svg.y+svg.height]];}return[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]];}```ThisdefaultimplementationrequiresthattheownerSVGelementhaveadefined[viewBox](https://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute),or[width](https://www.w3.org/TR/SVG/struct.html#SVGElementWidthAttribute)and[height](https://www.w3.org/TR/SVG/struct.html#SVGElementHeightAttribute)attributes.Alternatively,considerusing[*element*.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).(InFirefox,[*element*.clientWidth](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth)and[*element*.clientHeight](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight)iszeroforSVGelements!)Thebrushextentdeterminesthesizeoftheinvisibleoverlayandalsoconstrainsthebrushselection;thebrushselectioncannotgooutsidethebrushextent.##*brush*.filter(*filter*){#brush_filter}[Examples](https://observablehq.com/@d3/brush-filter)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·If*filter*isspecified,setsthefiltertothespecifiedfunctionandreturnsthebrush.If*filter*isnotspecified,returnsthecurrentfilter,whichdefaultsto:```jsfunctionfilter(event){return!event.ctrlKey&&!event.button;}```Ifthefilterreturnsfalsey,theinitiatingeventisignoredandnobrushgestureisstarted.Thus,thefilterdetermineswhichinputeventsareignored.Thedefaultfilterignoresmousedowneventsonsecondarybuttons,sincethosebuttonsaretypicallyintendedforotherpurposes,suchasthecontextmenu.##*brush*.touchable(*touchable*){#brush_touchable}[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·If*touchable*isspecified,setsthetouchsupportdetectortothespecifiedfunctionandreturnsthebrush.If*touchable*isnotspecified,returnsthecurrenttouchsupportdetector,whichdefaultsto:```jsfunctiontouchable(){returnnavigator.maxTouchPoints||("ontouchstart"inthis);}```Toucheventlistenersareonlyregisteredifthedetectorreturnstruthyforthecorrespondingelementwhenthebrushis[applied](#_brush).Thedefaultdetectorworkswellformostbrowsersthatarecapableoftouchinput,butnotall;Chrome’smobiledeviceemulator,forexample,failsdetection.##*brush*.keyModifiers(*modifiers*){#brush_keyModifiers}[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·If*modifiers*isspecified,setswhetherthebrushlistenstokeyeventsduringbrushingandreturnsthebrush.If*modifiers*isnotspecified,returnsthecurrentbehavior,whichdefaultstotrue.##*brush*.handleSize(*size*){#brush_handleSize}[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·If*size*isspecified,setsthesizeofthebrushhandlestothespecifiednumberandreturnsthebrush.If*size*isnotspecified,returnsthecurrenthandlesize,whichdefaultstosix.Thismethodmustbecalledbefore[applyingthebrush](#_brush)toaselection;changingthehandlesizedoesnotaffectbrushesthatwerepreviouslyrendered.##*brush*.on(*typenames*,*listener*){#brush_on}[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·If*listener*isspecified,setstheevent*listener*forthespecified*typenames*andreturnsthebrush.Ifaneventlistenerwasalreadyregisteredforthesametypeandname,theexistinglistenerisremovedbeforethenewlistenerisadded.If*listener*isnull,removesthecurrenteventlistenersforthespecified*typenames*,ifany.If*listener*isnotspecified,returnsthefirstcurrently-assignedlistenermatchingthespecified*typenames*,ifany.Whenaspecifiedeventisdispatched,each*listener*willbeinvokedwiththesamecontextandargumentsas[*selection*.on](./d3-selection/events.md#selection_on)listeners:thecurrentevent`event`anddatum`d`,withthe`this`contextasthecurrentDOMelement.The*typenames*isastringcontainingoneormore*typename*separatedbywhitespace.Each*typename*isa*type*,optionallyfollowedbyaperiod(`.`)anda*name*,suchas`brush.foo`and`brush.bar`;thenameallowsmultiplelistenerstoberegisteredforthesame*type*.The*type*mustbeoneofthefollowing:*`start`-atthestartofabrushgesture,suchasonmousedown.*`brush`-whenthebrushmoves,suchasonmousemove.*`end`-attheendofabrushgesture,suchasonmouseup.See[*dispatch*.on](./d3-dispatch.md#dispatch_on)and[brushevents](#brush-events)formore.##brushSelection(*node*){#brushSelection}[Examples](https://observablehq.com/@d3/double-click-brush-clear)·[Source](https://github.com/d3/d3-brush/blob/main/src/brush.js)·Returnsthecurrentbrushselectionforthespecified*node*.Internally,anelement’sbrushstateisstoredas*element*.\_\_brush;however,youshouldusethismethodratherthanaccessingitdirectly.Ifthegiven*node*hasnoselection,returnsnull.Otherwise,the*selection*isdefinedasanarrayofnumbers.Fora[two-dimensionalbrush](#brush),itis[[*x0*,*y0*],[*x1*,*y1*]],where*x0*istheminimum*x*-value,*y0*istheminimum*y*-value,*x1*isthemaximum*x*-value,and*y1*isthemaximum*y*-value.Foran[*x*-brush](#brushX),itis[*x0*,*x1*];fora[*y*-brush](#brushY),itis[*y0*,*y1*].##BrusheventsWhena[brusheventlistener](#brush_on)isinvoked,itreceivesthecurrentbrushevent.The*event*objectexposesseveralfields:*`target`-theassociated[brushbehavior](#brush).*`type`-thestring“start”,“brush”or“end”;see[*brush*.on](#brush_on).*`selection`-thecurrent[brushselection](#brushSelection).*`sourceEvent`-theunderlyinginputevent,suchasmousemoveortouchmove.*`mode`-thestring“drag”,“space”,“handle”or“center”;themodeofthebrush.