#ControlflowForadvancedusage,transitionsprovidemethodsforcustomcontrolflow.##ThelifeofatransitionImmediatelyaftercreatingatransition,suchasby[*selection*.transition](./selecting.md#selection_transition)or[*transition*.transition](./selecting.md#transition_transition),youmayconfigurethetransitionusingmethodssuchas[*transition*.delay](./timing.md#transition_delay),[*transition*.duration](./timing.md#transition_duration),[*transition*.attr](./modifying.md#transition_attr)and[*transition*.style](./modifying.md#transition_style).Methodsthatspecifytargetvalues(suchas*transition*.attr)areevaluatedsynchronously;however,methodsthatrequirethestartingvalueforinterpolation,suchas[*transition*.attrTween](./modifying.md#transition_attrTween)and[*transition*.styleTween](./modifying.md#transition_styleTween),mustbedeferreduntilthetransitionstarts.Shortlyaftercreation,eitherattheendofthecurrentframeorduringthenextframe,thetransitionisscheduled.Atthispoint,thedelayand`start`eventlistenersmaynolongerbechanged;attemptingtodosothrowsanerrorwiththemessage“toolate:alreadyscheduled”(orifthetransitionhasended,“transitionnotfound”).Whenthetransitionsubsequentlystarts,itinterruptstheactivetransitionofthesamenameonthesameelement,ifany,dispatchingan`interrupt`eventtoregisteredlisteners.(Notethatinterruptshappenonstart,notcreation,andthusevenazero-delaytransitionwillnotimmediatelyinterrupttheactivetransition:theoldtransitionisgivenafinalframe.Use[*selection*.interrupt](#selection_interrupt)tointerruptimmediately.)Thestartingtransitionalsocancelsanypendingtransitionsofthesamenameonthesameelementthatwerecreatedbeforethestartingtransition.Thetransitionthendispatchesa`start`eventtoregisteredlisteners.Thisisthelastmomentatwhichthetransitionmaybemodified:thetransition’stiming,tweens,andlistenersmaynotbechangedwhenitisrunning;attemptingtodosothrowsanerrorwiththemessage“toolate:alreadyrunning”(orifthetransitionhasended,“transitionnotfound”).Thetransitioninitializesitstweensimmediatelyafterstarting.Duringtheframethetransitionstarts,but*after*alltransitionsstartingthisframehavebeenstarted,thetransitioninvokesitstweensforthefirsttime.Batchingtweeninitialization,whichtypicallyinvolvesreadingfromtheDOM,improvesperformancebyavoidinginterleavedDOMreadsandwrites.Foreachframethatatransitionisactive,itinvokesitstweenswithan[eased](./timing.md#transition_ease)*t*-valuerangingfrom0to1.Withineachframe,thetransitioninvokesitstweensintheordertheywereregistered.Whenatransitionends,itinvokesitstweensafinaltimewitha(non-eased)*t*-valueof1.Itthendispatchesan`end`eventtoregisteredlisteners.Thisisthelastmomentatwhichthetransitionmaybeinspected:afterending,thetransitionisdeletedfromtheelement,anditsconfigurationisdestroyed.(Atransition’sconfigurationisalsodestroyedoninterruptorcancel.)Attemptingtoinspectatransitionafteritisdestroyedthrowsanerrorwiththemessage“transitionnotfound”.##*selection*.interrupt(*name*){#selection_interrupt}[Source](https://github.com/d3/d3-transition/blob/main/src/selection/interrupt.js)·Interruptstheactivetransitionofthespecified*name*ontheselectedelements,andcancelsanypendingtransitionswiththespecified*name*,ifany.Ifanameisnotspecified,nullisused.Interruptingatransitiononanelementhasnoeffectonanytransitionsonanydescendantelements.Forexample,an[axistransition](../d3-axis.md)consistsofmultipleindependent,synchronizedtransitionsonthedescendantsoftheaxis[Gelement](https://www.w3.org/TR/SVG/struct.html#Groups)(theticklines,theticklabels,thedomainpath,*etc.*).Tointerrupttheaxistransition,youmustthereforeinterruptthedescendants:```jsselection.selectAll("*").interrupt();```The[universalselector](https://developer.mozilla.org/en-US/docs/Web/CSS/Universal_selectors),`*`,selectsalldescendantelements.IfyoualsowanttointerrupttheGelementitself:```jsselection.interrupt().selectAll("*").interrupt();```##interrupt(*node*,*name*){#interrupt}[Source](https://github.com/d3/d3-transition/blob/main/src/interrupt.js)·Interruptstheactivetransitionofthespecified*name*onthespecified*node*,andcancelsanypendingtransitionswiththespecified*name*,ifany.Ifanameisnotspecified,nullisused.Seealso[*selection*.interrupt](#selection_interrupt).##*transition*.end(){#transition_end}[Source](https://github.com/d3/d3-transition/blob/main/src/transition/end.js)·Returnsapromisethatresolveswheneveryselectedelementfinishestransitioning.Ifanyelement’stransitioniscancelledorinterrupted,thepromiserejects.##*transition*.on(*typenames*,*listener*){#transition_on}[Source](https://github.com/d3/d3-transition/blob/main/src/transition/on.js)·Addsorremovesa*listener*toeachselectedelementforthespecifiedevent*typenames*.The*typenames*isoneofthefollowingstringeventtypes:*`start`-whenthetransitionstarts.*`end`-whenthetransitionends.*`interrupt`-whenthetransitionisinterrupted.*`cancel`-whenthetransitioniscancelled.See[TheLifeofaTransition](#the-life-of-a-transition)formore.Notethattheseare*not*nativeDOMeventsasimplementedby[*selection*.on](../d3-selection/events.md#selection_on)and[*selection*.dispatch](../d3-selection/events.md#selection_dispatch),buttransitionevents!Thetypemaybeoptionallyfollowedbyaperiod(`.`)andaname;theoptionalnameallowsmultiplecallbackstoberegisteredtoreceiveeventsofthesametype,suchas`start.foo`and`start.bar`.Tospecifymultipletypenames,separatetypenameswithspaces,suchas`interruptend`or`start.foostart.bar`.Whenaspecifiedtransitioneventisdispatchedonaselectednode,thespecified*listener*willbeinvokedforthetransitioningelement,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement.Listenersalwaysseethelatestdatumfortheirelement,buttheindexisapropertyoftheselectionandisfixedwhenthelistenerisassigned;toupdatetheindex,re-assignthelistener.Ifaneventlistenerwaspreviouslyregisteredforthesame*typename*onaselectedelement,theoldlistenerisremovedbeforethenewlistenerisadded.Toremovealistener,passnullasthe*listener*.Toremovealllistenersforagivenname,passnullasthe*listener*and`.foo`asthe*typename*,where`foo`isthename;toremovealllistenerswithnoname,specify`.`asthe*typename*.Ifa*listener*isnotspecified,returnsthecurrently-assignedlistenerforthespecifiedevent*typename*onthefirst(non-null)selectedelement,ifany.Ifmultipletypenamesarespecified,thefirstmatchinglistenerisreturned.##*transition*.each(*function*){#transition_each}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/each.js)·Invokesthespecified*function*foreachselectedelement,passinginthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement.Thismethodcanbeusedtoinvokearbitrarycodeforeachselectedelement,andisusefulforcreatingacontexttoaccessparentandchilddatasimultaneously.Equivalentto[*selection*.each](../d3-selection/control-flow.md#selection_each).##*transition*.call(*function*,...*arguments*){#transition_call}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/call.js)·Invokesthespecified*function*exactlyonce,passinginthistransitionalongwithanyoptional*arguments*.Returnsthistransition.Thisisequivalenttoinvokingthefunctionbyhandbutfacilitatesmethodchaining.Forexample,tosetseveralattributesinareusablefunction:```jsfunctioncolor(transition,fill,stroke){transition.style("fill",fill).style("stroke",stroke);}```Nowsay:```jsd3.selectAll("div").transition().call(color,"red","blue");```Thisisequivalentto:```jscolor(d3.selectAll("div").transition(),"red","blue");```Equivalentto[*selection*.call](../d3-selection/control-flow.md#selection_call).##*transition*.empty(){#transition_empty}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/empty.js)·Returnstrueifthistransitioncontainsno(non-null)elements.Equivalentto[*selection*.empty](../d3-selection/control-flow.md#selection_empty).##*transition*.nodes(){#transition_nodes}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/nodes.js)·Returnsanarrayofall(non-null)elementsinthistransition.Equivalentto[*selection*.nodes](../d3-selection/control-flow.md#selection_nodes).##*transition*.node(){#transition_node}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/node.js)·Returnsthefirst(non-null)elementinthistransition.Ifthetransitionisempty,returnsnull.Equivalentto[*selection*.node](../d3-selection/control-flow.md#selection_node).##*transition*.size(){#transition_size}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/size.js)·Returnsthetotalnumberofelementsinthistransition.Equivalentto[*selection*.size](../d3-selection/control-flow.md#selection_size).