#QuantilescalesQuantilescalesmapasampledinputdomaintoadiscreterange.Thedomainisconsideredcontinuousandthusthescalewillacceptanyreasonableinputvalue;however,thedomainisspecifiedasadiscretesetofsamplevalues.Thenumberofvaluesin(thecardinalityof)theoutputrangedeterminesthenumberofquantilesthatwillbecomputedfromthedomain.Tocomputethequantiles,thedomainissorted,andtreatedasa[populationofdiscretevalues](https://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population);see[quantile](../d3-array/summarize.md#quantile).See[thisquantilechoropleth](https://observablehq.com/@d3/quantile-choropleth)foranexample.##scaleQuantile(*domain*,*range*){#scaleQuantile}[Examples](https://observablehq.com/@d3/quantile-quantize-and-threshold-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/quantile.js)·Constructsanewquantilescalewiththespecified[*domain*](#quantile_domain)and[*range*](#quantile_range).```jsconstcolor=d3.scaleQuantile(penguins.map((d)=>d.body_mass_g),d3.schemeBlues[5]);```Ifeither*domain*or*range*isnotspecified,eachdefaultstotheemptyarray.Thequantilescaleisinvaliduntilbothadomainandrangearespecified.##*quantile*(*value*){#_quantile}[Examples](https://observablehq.com/@d3/quantile-quantize-and-threshold-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/quantile.js)·Givena*value*intheinput[domain](#quantile_domain),returnsthecorrespondingvalueintheoutput[range](#quantile_range).```jscolor(3000);//"#eff3ff"color(4000);//"#6baed6"color(5000);//"#08519c"```##*quantile*.invertExtent(*value*){#quantile_invertExtent}[Examples](https://observablehq.com/@d3/quantile-quantize-and-threshold-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/quantile.js)·Returnstheextentofvaluesinthe[domain](#quantile_domain)[<i>x0</i>,<i>x1</i>]forthecorresponding*value*inthe[range](#quantile_range):theinverseof[*quantile*](#_quantile).```jscolor.invertExtent("#eff3ff");//[2700,3475]color.invertExtent("#6baed6");//[3800,4300]color.invertExtent("#08519c");//[4950,6300]```Thismethodisusefulforinteraction,saytodeterminethevalueinthedomainthatcorrespondstothepixellocationunderthemouse.##*quantile*.domain(*domain*){#quantile_domain}[Examples](https://observablehq.com/@d3/quantile-quantize-and-threshold-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/quantile.js)·If*domain*isspecified,setsthedomainofthequantilescaletothespecifiedsetofdiscretenumericvaluesandreturnsthisscale.```jsconstcolor=d3.scaleQuantile(d3.schemeBlues[5]);color.domain(penguins.map((d)=>d.body_mass_g));```Thearraymustnotbeempty,andmustcontainatleastonenumericvalue;NaN,nullandundefinedvaluesareignoredandnotconsideredpartofthesamplepopulation.Iftheelementsinthegivenarrayarenotnumbers,theywillbecoercedtonumbers.Acopyoftheinputarrayissortedandstoredinternally.If*domain*isnotspecified,returnsthescale’scurrentdomain(thesetofobservedvalues).```jscolor.domain()//[2700,2850,2850,2900,2900,2900,2900,…]```##*quantile*.range(*range*){#quantile_range}[Examples](https://observablehq.com/@d3/quantile-quantize-and-threshold-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/quantile.js)·If*range*isspecified,setsthediscretevaluesintherange.```jsconstcolor=d3.scaleQuantile();color.range(d3.schemeBlues[5]);```Thearraymustnotbeempty,andmaycontainanytypeofvalue.Thenumberofvaluesin(thecardinality,orlength,of)the*range*arraydeterminesthenumberofquantilesthatarecomputed.Forexample,tocomputequartiles,*range*mustbeanarrayoffourelementssuchas[0,1,2,3].If*range*isnotspecified,returnsthecurrentrange.```jscolor.range()//["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"]```##*quantile*.quantiles(){#quantile_quantiles}[Examples](https://observablehq.com/@d3/quantile-quantize-and-threshold-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/quantile.js)·Returnsthequantilethresholds.```jscolor.quantiles()//[3475,3800,4300,4950]```Ifthe[range](#quantile_range)contains*n*discretevalues,thereturnedarraywillcontain*n*-1thresholds.Valueslessthanthefirstthresholdareconsideredinthefirstquantile;valuesgreaterthanorequaltothefirstthresholdbutlessthanthesecondthresholdareinthesecondquantile,andsoon.Internally,thethresholdsarrayisusedwith[bisect](../d3-array/bisect.md)tofindtheoutputquantileassociatedwiththegiveninputvalue.##*quantile*.copy(){#quantile_copy}[Examples](https://observablehq.com/@d3/quantile-quantize-and-threshold-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/quantile.js)·Returnsanexactcopyofthisscale.```jsconstc1=d3.scaleQuantile(d3.schemeBlues[5]);constc2=c1.copy();```Changestothisscalewillnotaffectthereturnedscale,andviceversa.