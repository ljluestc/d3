<scriptsetup>import*asPlotfrom"@observablehq/plot";import*asd3from"d3";import{ref}from"vue";importPlotRenderfrom"../components/PlotRender.js";constdomain=ref("a,b,c,d,e,f");constpadding=ref(0.1);constpaddingOuter=ref(0.1);constpaddingInner=ref(0.1);constalign=ref(0.5);constround=ref(false);</script>#BandscalesBandscalesarelike[ordinalscales](./ordinal.md)excepttheoutputrangeiscontinuousandnumeric.Thescaledividesthecontinuousrangeintouniformbands.Bandscalesaretypicallyusedforbarchartswithanordinalorcategoricaldimension.##scaleBand(*domain*,*range*){#scaleBand}[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·Constructsanewbandscalewiththespecified[*domain*](#band_domain)and[*range*](#band_range),no[padding](#band_padding),no[rounding](#band_round)andcenter[alignment](#band_align).```jsconstx=d3.scaleBand(["a","b","c"],[0,960]);```Ifasingleargumentisspecified,itisinterpretedasthe*range*.If*domain*isnotspecified,itdefaultstotheemptydomain.If*range*isnotspecified,itdefaultstotheunitrange[0,1].##*band*(*value*){#_band}[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·Givena*value*intheinput[domain](#band_domain),returnsthestartofthecorrespondingbandderivedfromtheoutput[range](#band_range).```jsconstx=d3.scaleBand(["a","b","c"],[0,960]);x("a");//0x("b");//320x("c");//640x("d");//undefined```Ifthegiven*value*isnotinthescale’sdomain,returnsundefined.##*band*.domain(*domain*){#band_domain}<p><labelclass="label-input">Domain:<inputtype="text"v-model="domain"></label></p><PlotRender:options='{grid:true,marginTop:0.5,x:{padding:0.1,domain:d3.csvParseRows(domain).flat()},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell(d3.csvParseRows(domain).flat(),{x:Plot.identity,stroke:"currentColor"})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·If*domain*isspecified,setsthedomaintothespecifiedarrayofvaluesandreturnsthisscale.```js-vueconstx=d3.scaleBand([0,960]).domain([{{d3.csvParseRows(domain).flat().map(JSON.stringify).join(",")}}]);```Thefirstelementin*domain*willbemappedtothefirstband,theseconddomainvaluetothesecondband,andsoon.Domainvaluesarestoredinternallyinan[InternMap](../d3-array/intern.md)fromprimitivevaluetoindex;theresultingindexisthenusedtodeterminetheband.Thus,abandscale’svaluesmustbecoercibletoaprimitivevalue,andtheprimitivedomainvalueuniquelyidentifiesthecorrespondingband.If*domain*isnotspecified,thismethodreturnsthecurrentdomain.##*band*.range(*range*){#band_range}[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·If*range*isspecified,setsthescale’srangetothespecifiedtwo-elementarrayofnumbersandreturnsthisscale.```jsconstx=d3.scaleBand().range([0,960]);```Iftheelementsinthegivenarrayarenotnumbers,theywillbecoercedtonumbers.If*range*isnotspecified,returnsthescale’scurrentrange,whichdefaultsto[0,1].##*band*.rangeRound(*range*){#band_rangeRound}[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·Setsthescale’s[*range*](#band_range)tothespecifiedtwo-elementarrayofnumberswhilealsoenabling[rounding](#band_round);returnsthisscale.```jsconstx=d3.scaleBand().rangeRound([0,960]);```Thisisaconveniencemethodequivalentto:```jsband.range(range).round(true)```Roundingissometimesusefulforavoidingantialiasingartifacts,thoughalsoconsiderthe[shape-rendering](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering)“crispEdges”styles.##*band*.round(*round*){#band_round}<p><labelclass="label-input">Round:<inputtype="checkbox"v-model="round"></label></p><PlotRender:options='{grid:true,marginTop:0.5,x:{padding:0.2,round},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell("abcdefghij",{x:Plot.identity,stroke:"currentColor"})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·If*round*isspecified,enablesordisablesroundingaccordinglyandreturnsthisscale.```js-vueconstx=d3.scaleBand(["a","b","c"],[0,960]).round({{round}});```If*round*isnotspecified,returnswhetherroundingisenabled.```js-vuex.round()//{{round}}```Ifroundingisenabled,thestartandstopofeachbandwillbeintegers.Roundingissometimesusefulforavoidingantialiasingartifacts,thoughalsoconsiderthe[shape-rendering](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering)“crispEdges”styles.Notethatifthewidthofthedomainisnotamultipleofthecardinalityoftherange,theremaybeleftoverunusedspace,evenwithoutpadding!Use[*band*.align](#band_align)tospecifyhowtheleftoverspaceisdistributed.##*band*.paddingInner(*padding*){#band_paddingInner}<p><labelclass="label-input"><span>Innerpadding:</span><inputtype="range"v-model.number="paddingInner"min="0"max="1"step="0.01"><spanstyle="font-variant-numeric:tabular-nums;">{{paddingInner.toFixed(2)}}</span></label></p><PlotRender:options='{grid:true,marginTop:0.5,x:{paddingInner,round:false},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell("abcdefghij",{x:Plot.identity,stroke:"currentColor"})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·If*padding*isspecified,setstheinnerpaddingtothespecifiednumberwhichmustbelessthanorequalto1andreturnsthisscale.```js-vueconstx=d3.scaleBand(["a","b","c"],[0,960]).paddingInner({{paddingInner}});```If*padding*isnotspecified,returnsthecurrentinnerpaddingwhichdefaultsto0.```js-vuex.paddingInner()//{{paddingInner}}```Theinnerpaddingspecifiestheproportionoftherangethatisreservedforblankspacebetweenbands;avalueof0meansnoblankspacebetweenbands,andavalueof1meansa[bandwidth](#band_bandwidth)ofzero.##*band*.paddingOuter(*padding*){#band_paddingOuter}<p><labelclass="label-input"><span>Outerpadding:</span><inputtype="range"v-model.number="paddingOuter"min="0"max="1"step="0.01"><spanstyle="font-variant-numeric:tabular-nums;">{{paddingOuter.toFixed(2)}}</span></label></p><PlotRender:options='{grid:true,marginTop:0.5,x:{paddingOuter,round:false},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell("abcdefghij",{x:Plot.identity,stroke:"currentColor"})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·If*padding*isspecified,setstheouterpaddingtothespecifiednumberwhichistypicallyintherange[0,1]andreturnsthisscale.```js-vueconstx=d3.scaleBand(["a","b","c"],[0,960]).paddingOuter({{paddingOuter}});```If*padding*isnotspecified,returnsthecurrentouterpaddingwhichdefaultsto0.```js-vuex.paddingOuter()//{{paddingOuter}}```Theouterpaddingspecifiestheamountofblankspace,intermsofmultiplesofthe[step](#band_step),toreservebeforethefirstbandandafterthelastband.##*band*.padding(*padding*){#band_padding}<p><labelclass="label-input"><span>Padding:</span><inputtype="range"v-model.number="padding"min="0"max="1"step="0.01"><spanstyle="font-variant-numeric:tabular-nums;">{{padding.toFixed(2)}}</span></label></p><PlotRender:options='{grid:true,marginTop:0.5,x:{padding,round:false},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell("abcdefghij",{x:Plot.identity,stroke:"currentColor"})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·Aconveniencemethodforsettingthe[inner](#band_paddingInner)and[outer](#band_paddingOuter)paddingtothesame*padding*value.```js-vueconstx=d3.scaleBand(["a","b","c"],[0,960]).padding({{padding}});```If*padding*isnotspecified,returnstheinnerpadding.```js-vuex.padding()//{{padding}}```##*band*.align(*align*){#band_align}<p><labelclass="label-input"><span>Align:</span><inputtype="range"v-model.number="align"min="0"max="1"step="0.01"><spanstyle="font-variant-numeric:tabular-nums;">{{align.toFixed(2)}}</span></label></p><PlotRender:options='{grid:true,marginTop:0.5,x:{padding:0.2,align,round:false},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell("abcdefghij",{x:Plot.identity,stroke:"currentColor"})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·If*align*isspecified,setsthealignmenttothespecifiedvaluewhichmustbeintherange[0,1],andreturnsthisscale.```js-vueconstx=d3.scaleBand(["a","b","c"],[0,960]).align({{align}});```If*align*isnotspecified,returnsthecurrentalignmentwhichdefaultsto0.5.```js-vuex.align()//{{align}}```Thealignmentspecifieshowouterpaddingisdistributedintherange.Avalueof0.5indicatesthattheouterpaddingshouldbeequallydistributedbeforethefirstbandandafterthelastband;*i.e.*,thebandsshouldbecenteredwithintherange.Avalueof0or1maybeusedtoshiftthebandstooneside,saytopositionthemadjacenttoanaxis.Formore,[seethisexplainer](https://observablehq.com/@d3/band-align).##*band*.bandwidth(){#band_bandwidth}<PlotRender:options='{grid:true,marginTop:10.5,x:{padding:0.2,round:false},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell("abcdefghij",{x:Plot.identity,stroke:"currentColor"}),Plot.dotX(["a"],{stroke:"var(--vp-c-brand)",symbol:{draw(context,size){constx=Plot.scale({x:{type:"band",padding:0.2,round:false,domain:"abcdefghij",range:[20,688-20]}});constr=x.bandwidth/2;context.moveTo(6-r,-22-3);context.lineTo(0-r,-22);context.lineTo(6-r,-22+3);context.moveTo(0-r,-22);context.lineTo(r,-22);context.moveTo(r-6,-22-3);context.lineTo(r,-22);context.lineTo(r-6,-22+3);}}})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·Returnsthewidthofeachband.```jsx.bandwidth()//50.8235294117647```##*band*.step(){#band_step}<PlotRender:options='{grid:true,marginTop:10.5,x:{padding:0.2,round:false},marks:[Plot.frame({strokeOpacity:0.3}),Plot.cell("abcdefghij",{x:Plot.identity,stroke:"currentColor"}),Plot.dotX(["a"],{stroke:"var(--vp-c-brand)",symbol:{draw(context,size){constx=Plot.scale({x:{type:"band",padding:0.2,round:false,domain:"abcdefghij",range:[20,688-20]}});constr=x.bandwidth/2;context.moveTo(6-r,-22-3);context.lineTo(0-r,-22);context.lineTo(6-r,-22+3);context.moveTo(0-r,-22);context.lineTo(x.step-r,-22);context.moveTo(x.step-6-r,-22-3);context.lineTo(x.step-r,-22);context.lineTo(x.step-6-r,-22+3);}}})]}'/>[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·Returnsthedistancebetweenthestartsofadjacentbands.```jsx.step()//63.529411764705884```##*band*.copy(){#band_copy}[Examples](https://observablehq.com/@d3/d3-scaleband)·[Source](https://github.com/d3/d3-scale/blob/main/src/band.js)·Returnsanexactcopyofthisscale.```jsconstx1=d3.scaleBand(["a","b","c"],[0,960]);constx2=x1.copy();```Changestothisscalewillnotaffectthereturnedscale,andviceversa.