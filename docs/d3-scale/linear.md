#LinearscalesLinearscalesmapacontinuous,quantitativeinput[domain](#linear_domain)toacontinuousoutput[range](#linear_range)usingalineartransformation(translateandscale).Iftherangeisalsonumeric,themappingmaybe[inverted](#linear_invert).Linearscalesareagooddefaultchoiceforcontinuousquantitativedatabecausetheypreserveproportionaldifferences.Eachrangevalue*y*canbeexpressedasafunctionofthedomainvalue*x*:*y*=*mx*+*b*.<!--Acontinuousscaleisnotconstructeddirectly;instead,trya[linear](#linear-scales),[power](#power-scales),[log](#log-scales),[identity](#identity-scales),[radial](#radial-scales),[time](#time-scales)or[sequentialcolor](#sequential-scales)scale.-->##scaleLinear(*domain*,*range*){#scaleLinear}[Examples](https://observablehq.com/@d3/d3-scalelinear)·[Source](https://github.com/d3/d3-scale/blob/main/src/linear.js)·Constructsanewlinearscalewiththespecified[domain](#linear_domain)and[range](#linear_range),the[default](../d3-interpolate/value.md#interpolate)[interpolator](#linear_interpolate),and[clamping](#linear_clamp)disabled.```jsd3.scaleLinear([0,100],["red","blue"])```Ifasingleargumentisspecified,itisinterpretedasthe*range*.Ifeither*domain*or*range*arenotspecified,eachdefaultsto[0,1].```jsd3.scaleLinear(["red","blue"])//defaultdomainof[0,1]```##*linear*(*value*){#_linear}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·Givena*value*fromthe[domain](#linear_domain),returnsthecorrespondingvaluefromthe[range](#linear_range).Forexample,toapplyapositionencoding:```jsconstx=d3.scaleLinear([10,130],[0,960]);x(20);//80x(50);//320```Toapplyacolorencoding:```jsconstcolor=d3.scaleLinear([10,100],["brown","steelblue"]);color(20);//"rgb(154,52,57)"color(50);//"rgb(123,81,103)"```Ifthegiven*value*isoutsidethedomain,and[clamping](#linear_clamp)isnotenabled,themappingwillbeextrapolatedsuchthatthereturnedvalueisoutsidetherange.##*linear*.invert(*value*){#linear_invert}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·Givena*value*fromthe[range](#linear_range),returnsthecorrespondingvaluefromthe[domain](#linear_domain).Inversionisusefulforinteraction,saytodeterminethedatavaluecorrespondingtothepositionofthemouse.Forexample,toinvertapositionencoding:```jsconstx=d3.scaleLinear([10,130],[0,960]);x.invert(80);//20x.invert(320);//50```Ifthegiven*value*isoutsidetherange,and[clamping](#linear_clamp)isnotenabled,themappingmaybeextrapolatedsuchthatthereturnedvalueisoutsidethedomain.Thismethodisonlysupportediftherangeisnumeric.Iftherangeisnotnumeric,returnsNaN.Foravalidvalue*y*intherange,<i>linear</i>(<i>linear</i>.invert(<i>y</i>))approximatelyequals*y*;similarly,foravalidvalue*x*inthedomain,<i>linear</i>.invert(<i>linear</i>(<i>x</i>))approximatelyequals*x*.Thescaleanditsinversemaynotbeexactduetothelimitationsoffloatingpointprecision.##*linear*.domain(*domain*){#linear_domain}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·If*domain*isspecified,setsthescale’sdomaintothespecifiedarrayofnumbersandreturnsthisscale.```jsconstx=d3.scaleLinear().domain([10,130]);```Thearraymustcontaintwoormoreelements.Iftheelementsinthegivenarrayarenotnumbers,theywillbecoercedtonumbers.Althoughcontinuousscalestypicallyhavetwovalueseachintheirdomainandrange,specifyingmorethantwovaluesproducesapiecewisescale.Forexample,tocreatea[divergingcolorscale](./diverging.md)thatinterpolatesbetweenwhiteandredfornegativevalues,andwhiteandgreenforpositivevalues,say:```jsconstcolor=d3.scaleLinear([-1,0,1],["red","white","green"]);color(-0.5);//"rgb(255,128,128)"color(+0.5);//"rgb(128,192,128)"```Internally,apiecewisescaleperformsa[binarysearch](../d3-array/bisect.md)fortherangeinterpolatorcorrespondingtothegivendomainvalue.Thus,thedomainmustbeinascendingordescendingorder.Ifthedomainandrangehavedifferentlengths*N*and*M*,onlythefirst*min(N,M)*elementsineachareobserved.If*domain*isnotspecified,returnsacopyofthescale’scurrentdomain.```jscolor.domain()//[-1,0,1]```##*linear*.range(range){#linear_range}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·If*range*isspecified,setsthescale’srangetothespecifiedarrayofvaluesandreturnsthisscale.```jsconstx=d3.scaleLinear().range([0,960]);```Thearraymustcontaintwoormoreelements.Unlikethe[domain](#linear_domain),elementsinthegivenarrayneednotbenumbers;anyvaluethatissupportedbytheunderlying[interpolator](#linear_interpolate)willwork,thoughnotethatnumericrangesarerequiredfor[invert](#linear_invert).If*range*isnotspecified,returnsacopyofthescale’scurrentrange.```jsx.range()//[0,960]```See[*linear*.interpolate](#linear_interpolate)formoreexamples.##*linear*.rangeRound(*range*){#linear_rangeRound}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·Setsthescale’s[*range*](#linear_range)tothespecifiedarrayofvalueswhilealsosettingthescale’s[interpolator](#linear_interpolate)to[interpolateRound](../d3-interpolate/value.md#interpolateRound);returnsthisscale.```jsconstx=d3.scaleLinear().rangeRound([0,960]);```Thisisaconveniencemethodequivalentto:```jslinear.range(range).interpolate(d3.interpolateRound)```Theroundinginterpolatorissometimesusefulforavoidingantialiasingartifacts,thoughalsoconsiderthe[shape-rendering](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering)“crispEdges”styles.Notethatthisinterpolatorcanonlybeusedwithnumericranges.##*linear*.clamp(*clamp*){#linear_clamp}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·If*clamp*isspecified,enablesordisablesclampingaccordingly;returnsthisscale.```jsconstx=d3.scaleLinear([0,960]).clamp(true);```Ifclampingisdisabledandthescaleispassedavalueoutsidethe[domain](#linear_domain),thescalemayreturnavalueoutsidethe[range](#linear_range)throughextrapolation.Ifclampingisenabled,thereturnvalueofthescaleisalwayswithinthescale’srange.Clampingsimilarlyappliesto[*linear*.invert](#linear_invert).Forexample:```jsconstx=d3.scaleLinear([10,130],[0,960]);//clampingdisabledbydefaultx(-10);//-160,outsiderangex.invert(-160);//-10,outsidedomainx.clamp(true);//enableclampingx(-10);//0,clampedtorangex.invert(-160);//10,clampedtodomain```If*clamp*isnotspecified,returnswhetherornotthescalecurrentlyclampsvaluestowithintherange.```jsx.clamp()//true,perhaps```##*linear*.unknown(*value*){#linear_unknown}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·If*value*isspecified,setstheoutputvalueofthescaleforundefinedorNaNinputvaluesandreturnsthisscale.Thisisusefulforspecifyinghowmissingorinvaliddataisdisplayed.```jsconstcolor=d3.scaleLinear([0,100],["red","blue"]).unknown("#ccc");color(NaN);//"#ccc"```If*value*isnotspecified,returnsthecurrentunknownvalue,whichdefaultstoundefined.```jscolor.unknown()//"#ccc"```##*linear*.interpolate(*interpolate*){#linear_interpolate}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·If*interpolate*isspecified,setsthescale’s[range](#linear_range)interpolatorfactory.```jsconstcolor=d3.scaleLinear(["red","blue"]).interpolate(d3.interpolateHcl);```Thescale’sinterpolatorfactoryisusedtocreateinterpolatorsforeachadjacentpairofvaluesfromtherange;theseinterpolatorsthenmapanormalizeddomainparameter*t*in[0,1]tothecorrespondingvalueintherange.If*factory*isnotspecified,returnsthescale’scurrentinterpolatorfactory,whichdefaultsto[d3.interpolate](../d3-interpolate/value.md#interpolate).See[d3-interpolate](../d3-interpolate.md)formoreinterpolators.Forexample,consideradivergingcolorscalewiththreecolorsintherange:```jsconstcolor=d3.scaleLinear([-100,0,+100],["red","white","green"]);```Twointerpolatorsarecreatedinternallybythescale,equivalentto:```jsconsti0=d3.interpolate("red","white");consti1=d3.interpolate("white","green");```Acommonreasontospecifyacustominterpolatoristochangethecolorspaceofinterpolation.Forexample,touse[HCL](../d3-interpolate/color.md#interpolateHcl):```jsconstcolor=d3.scaleLinear().domain([10,100]).range(["brown","steelblue"]).interpolate(d3.interpolateHcl);```Orfor[Cubehelix](../d3-interpolate/color.md#interpolateCubehelix)withacustomgamma:```jsconstcolor=d3.scaleLinear().domain([10,100]).range(["brown","steelblue"]).interpolate(d3.interpolateCubehelix.gamma(3));```:::warningCAUTIONThe[defaultinterpolator](../d3-interpolate/value.md#interpolate)**mayreusereturnvalues**.Forexample,iftherangevaluesareobjects,thenthevalueinterpolatoralwaysreturnsthesameobject,modifyingitin-place.Ifthescaleisusedtosetanattributeorstyle,thisistypicallyacceptable(anddesirableforperformance);however,ifyouneedtostorethescale’sreturnvalue,youmustspecifyyourowninterpolatorormakeacopyasappropriate.:::##*linear*.ticks(*count*){#linear_ticks}[Examples](https://observablehq.com/@d3/scale-ticks)·[Source](https://github.com/d3/d3-scale/blob/main/src/linear.js)·Returnsapproximately*count*representativevaluesfromthescale’s[domain](#linear_domain).```jsconstx=d3.scaleLinear([10,100],["red","blue"]);x.ticks();//[10,20,30,40,50,60,70,80,90,100]```If*count*isnotspecified,itdefaultsto10.Thereturnedtickvaluesareuniformlyspaced,havehuman-readablevalues(suchasmultiplesofpowersof10),andareguaranteedtobewithintheextentofthedomain.Ticksareoftenusedtodisplayreferencelines,ortickmarks,inconjunctionwiththevisualizeddata.Thespecified*count*isonlyahint;thescalemayreturnmoreorfewervaluesdependingonthedomain.Seealsod3-array’s[ticks](../d3-array/ticks.md).##*linear*.tickFormat(*count*,*specifier*){#linear_tickFormat}[Examples](https://observablehq.com/@d3/scale-ticks)·[Source](https://github.com/d3/d3-scale/blob/main/src/tickFormat.js)·Returnsa[numberformat](../d3-format.md)functionsuitablefordisplayingatickvalue,automaticallycomputingtheappropriateprecisionbasedonthefixedintervalbetweentickvalues.Thespecified*count*shouldhavethesamevalueasthecountthatisusedtogeneratethe[tickvalues](#linear_ticks).```jsconstx=d3.scaleLinear([0.1,1],["red","blue"]);constf=x.tickFormat();f(0.1);//"0.1"f(1);//"1.0"```Anoptional*specifier*allowsa[customformat](../d3-format.md#locale_format)wheretheprecisionoftheformatisautomaticallysetbythescaleasappropriateforthetickinterval.Forexample,toformatpercentagechange,youmightsay:```jsconstx=d3.scaleLinear([-1,1],[0,960]);constT=x.ticks(5);//[-1,-0.5,0,0.5,1]constf=x.tickFormat(5,"+%");T.map(f);// ["−100%","−50%","+0%","+50%","+100%"]```If*specifier*usestheformattype`s`,thescalewillreturna[SI-prefixformat](../d3-format.md#locale_formatPrefix)basedonthelargestvalueinthedomain.Ifthe*specifier*alreadyspecifiesaprecision,thismethodisequivalentto[*locale*.format](../d3-format.md#locale_format).Seealso[d3.tickFormat](#tickFormat).##*linear*.nice(count){#linear_nice}[Examples](https://observablehq.com/@d3/d3-scalelinear)·[Source](https://github.com/d3/d3-scale/blob/main/src/nice.js)·Extendsthe[domain](#linear_domain)sothatitstartsandendsonniceroundvalues.```jsconstx=d3.scaleLinear([0.241079,0.969679],[0,960]).nice();x.domain();//[0.2,1]```Thismethodtypicallymodifiesthescale’sdomain,andmayonlyextendtheboundstothenearestroundvalue.Nicingisusefulifthedomainiscomputedfromdata,sayusing[extent](../d3-array/summarize.md#extent),andmaybeirregular.Ifthedomainhasmorethantwovalues,nicingthedomainonlyaffectsthefirstandlastvalue.Anoptionaltick*count*argumentallowsgreatercontroloverthestepsizeusedtoextendthebounds,guaranteeingthatthereturned[ticks](#linear_ticks)willexactlycoverthedomain.```jsconstx=d3.scaleLinear([0.241079,0.969679],[0,960]).nice(40);x.domain();//[0.24,0.98]```Nicingascaleonlymodifiesthecurrentdomain;itdoesnotautomaticallynicedomainsthataresubsequentlysetusing[*linear*.domain](#linear_domain).Youmustre-nicethescaleaftersettingthenewdomain,ifdesired.##*linear*.copy(){#linear_copy}[Examples](https://observablehq.com/@d3/continuous-scales)·[Source](https://github.com/d3/d3-scale/blob/main/src/continuous.js)·Returnsanexactcopyofthisscale.```jsconstx1=d3.scaleLinear([0,100],["red","blue"]);constx2=x1.copy();```Changestothisscalewillnotaffectthereturnedscale,andviceversa.##tickFormat(*start*,*stop*,*count*,*specifier*){#tickFormat}[Examples](https://observablehq.com/@d3/scale-ticks)·[Source](https://github.com/d3/d3-scale/blob/main/src/tickFormat.js)·Returnsa[numberformat](../d3-format.md)functionsuitablefordisplayingatickvalue,automaticallycomputingtheappropriateprecisionbasedonthefixedintervalbetweentickvalues,asdeterminedby[d3.tickStep](../d3-array/ticks.md#tickStep).```jsconstf=d3.tickFormat(0,1,20);f(1);//"1.00"```Anoptional*specifier*allowsa[customformat](../d3-format.md#locale_format)wheretheprecisionoftheformatisautomaticallysetbythescaleasappropriateforthetickinterval.Forexample,toformatpercentagechange,youmightsay:```jsconstf=d3.tickFormat(-1,1,5,"+%");f(-0.5);//"-50%"```If*specifier*usestheformattype`s`,thescalewillreturna[SI-prefixformat](../d3-format.md#locale_formatPrefix)basedonthelargerabsolutevalueof*start*and*stop*.Ifthe*specifier*alreadyspecifiesaprecision,thismethodisequivalentto[*locale*.format](../d3-format.md#locale_format).##scaleIdentity(*range*){#scaleIdentity}[Examples](https://observablehq.com/@d3/d3-scalelinear)·[Source](https://github.com/d3/d3-scale/blob/main/src/identity.js)·Constructsanewidentityscalewiththespecified[range](#linear_range)(andbyextension,[domain](#linear_domain)).```jsconstx=d3.scaleIdentity([0,960]);```Identityscalesareaspecialcaseof[linearscales](#linear-scales)wherethedomainandrangeareidentical;thescaleanditsinvertmethodarethustheidentityfunction.Thesescalesareoccasionallyusefulwhenworkingwithpixelcoordinates,sayinconjunctionwithanaxis.Identityscalesdonotsupport[rangeRound](#linear_rangeRound),[clamp](#linear_clamp)or[interpolate](#linear_interpolate).If*range*isnotspecified,itdefaultsto[0,1].##scaleRadial(*domain*,*range*){#scaleRadial}[Examples](https://observablehq.com/@d3/radial-stacked-bar-chart)·[Source](https://github.com/d3/d3-scale/blob/main/src/radial.js)·Constructsanewradialscalewiththespecified[domain](#linear_domain)and[range](#linear_range).```jsconstr=d3.scaleRadial([100,200],[0,480]);```Radialscalesareavariantof[linearscales](#linear-scales)wheretherangeisinternallysquaredsothataninputvaluecorrespondslinearlytothesquaredoutputvalue.Thesescalesareusefulwhenyouwanttheinputvaluetocorrespondtotheareaofagraphicalmarkandthemarkisspecifiedbyradius,asinaradialbarchart.Radialscalesdonotsupport[interpolate](#linear_interpolate).If*domain*or*range*isnotspecified,eachdefaultsto[0,1].