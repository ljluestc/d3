#d3-zoom[Examples](https://observablehq.com/collection/@d3/d3-zoom)·[Panningandzooming](https://observablehq.com/@d3/zoomable-scatterplot)lettheuserfocusonaregionofinterestbyrestrictingtheview.Itusesdirectmanipulation:click-and-dragtopan(translate),spinthewheeltozoom(scale),orpinchwithtouch.Panningandzoomingarewidelyusedinweb-basedmapping,butcanalsobeusedinvisualizationsuchasdensetimeseriesandscatterplots.Thezoombehaviorisaflexibleabstraction,handlingasurprisingvarietyofinputmodalitiesandbrowserquirks.ThezoombehaviorisagnosticabouttheDOM,soyoucanuseitwithHTML,[SVG](https://observablehq.com/@d3/zoom),or[Canvas](https://observablehq.com/@d3/zoom-canvas).Youcanused3-zoomwith[d3-scale](./d3-scale.md)and[d3-axis](./d3-axis.md)to[zoomaxes](https://observablehq.com/@d3/pan-zoom-axes).Youcanrestrictzoomingusing[*zoom*.scaleExtent](#zoom_scaleExtent)andpanningusing[*zoom*.translateExtent](#zoom_translateExtent).Youcancombined3-zoomwithotherbehaviorssuchas[d3-drag](./d3-drag.md)for[dragging](https://observablehq.com/@d3/drag-zoom)and[d3-brush](./d3-brush.md)for[focus+context](https://observablehq.com/@d3/focus-context).Thezoombehaviorcanbecontrolledprogrammaticallyusing[*zoom*.transform](#zoom_transform),allowingyoutoimplementuserinterfacecontrolswhichdrivethedisplayortostage[animatedtours](https://observablehq.com/@d3/scatterplot-tour)throughyourdata.[Smoothzoomtransitions](https://observablehq.com/@d3/programmatic-zoom)arebasedon[“Smoothandefficientzoomingandpanning”](http://www.win.tue.nl/~vanwijk/zoompan.pdf)byJarkeJ.vanWijkandWimA.A.Nuij.Seealso[d3-tile](https://github.com/d3/d3-tile)forexamplespanningandzoomingmaps.##zoom(){#zoom}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·Createsanewzoombehavior.Thereturnedbehavior,[*zoom*](#_zoom),isbothanobjectandafunction,andistypicallyappliedtoselectedelementsvia[*selection*.call](./d3-selection/control-flow.md#selection_call).##*zoom*(*selection*){#_zoom}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·Appliesthiszoombehaviortothespecified[*selection*](./d3-selection.md),bindingthenecessaryeventlistenerstoallowpanningandzooming,andinitializingthe[zoomtransform](#zoomTransform)oneachselectedelementtotheidentitytransformifnotalreadydefined.Thisfunctionistypicallynotinvokeddirectly,andisinsteadinvokedvia[*selection*.call](./d3-selection/control-flow.md#selection_call).Forexample,toinstantiateazoombehaviorandapplyittoaselection:```jsselection.call(d3.zoom().on("zoom",zoomed));```Internally,thezoombehavioruses[*selection*.on](./d3-selection/events.md#selection_on)tobindthenecessaryeventlistenersforzooming.Thelistenersusethename`.zoom`,soyoucansubsequentlyunbindthezoombehaviorasfollows:```jsselection.on(".zoom",null);```Todisablejustwheel-drivenzooming(saytonotinterferewithnativescrolling),youcanremovethezoombehavior’swheeleventlistenerafterapplyingthezoombehaviortotheselection:```jsselection.call(zoom).on("wheel.zoom",null);```Alternatively,use[*zoom*.filter](#zoom_filter)forgreatercontroloverwhicheventscaninitiatezoomgestures.Applyingthezoombehavioralsosetsthe[-webkit-tap-highlight-color](https://developer.apple.com/library/mac/documentation/AppleApplications/Reference/SafariWebContent/AdjustingtheTextSize/AdjustingtheTextSize.html#//apple_ref/doc/uid/TP40006510-SW5)styletotransparent,disablingthetaphighlightoniOS.Ifyouwantadifferenttaphighlightcolor,removeorre-applythisstyleafterapplyingthedragbehavior.Thezoombehaviorstoresthezoomstateontheelementtowhichthezoombehaviorwasapplied,notonthezoombehavioritself.Thisallowsthezoombehaviortobeappliedtomanyelementssimultaneouslywithindependentzooming.Thezoomstatecanchangeeitheronuserinteractionorprogrammaticallyvia[*zoom*.transform](#zoom_transform).Toretrievethezoomstate,use*event*.transformonthecurrent[zoomevent](#zoom-events)withinazoomeventlistener(see[*zoom*.on](#zoom_on)),oruse[zoomTransform](#zoomTransform)foragivennode.Thelatterisusefulformodifyingthezoomstateprogrammatically,saytoimplementbuttonsforzoominginandout.##*zoom*.transform(*selection*,*transform*,*point*){#zoom_transform}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*selection*isaselection,setsthe[currentzoomtransform](#zoomTransform)oftheselectedelementstothespecified*transform*,instantaneouslyemittingstart,zoomandend[events](#zoom-events).If*selection*isatransition,definesa“zoom”tweentothespecified*transform*using[interpolateZoom](./d3-interpolate/zoom.md#interpolateZoom),emittingastarteventwhenthetransitionstarts,zoomeventsforeachtickofthetransition,andthenanendeventwhenthetransitionends(orisinterrupted).Thetransitionwillattempttominimizethevisualmovementaroundthespecified*point*;ifthe*point*isnotspecified,itdefaultstothecenteroftheviewport[extent](#zoom_extent).The*transform*maybespecifiedeitherasa[zoomtransform](#zoomTransform)orasafunctionthatreturnsazoomtransform;similarly,the*point*maybespecifiedeitherasatwo-elementarray[*x*,*y*]orafunctionthatreturnssuchanarray.Ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentevent(`event`)anddatum`d`,withthe`this`contextasthecurrentDOMelement.Thisfunctionistypicallynotinvokeddirectly,andisinsteadinvokedvia[*selection*.call](./d3-selection/control-flow.md#selection_call)or[*transition*.call](./d3-transition/control-flow.md#transition_call).Forexample,toresetthezoomtransformtothe[identitytransform](#zoomIdentity)instantaneously:```jsselection.call(zoom.transform,d3.zoomIdentity);```Tosmoothlyresetthezoomtransformtotheidentitytransformover750milliseconds:```jsselection.transition().duration(750).call(zoom.transform,d3.zoomIdentity);```Thismethodrequiresthatyouspecifythenewzoomtransformcompletely,anddoesnotenforcethedefined[scaleextent](#zoom_scaleExtent)and[translateextent](#zoom_translateExtent),ifany.Toderiveanewtransformfromtheexistingtransform,andtoenforcethescaleandtranslateextents,seetheconveniencemethods[*zoom*.translateBy](#zoom_translateBy),[*zoom*.scaleBy](#zoom_scaleBy)and[*zoom*.scaleTo](#zoom_scaleTo).##*zoom*.translateBy(*selection*,*x*,*y*){#zoom_translateBy}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*selection*isaselection,[translates](#transform_translate)the[currentzoomtransform](#zoomTransform)oftheselectedelementsby*x*and*y*,suchthatthenew*t<sub>x1</sub>*=*t<sub>x0</sub>*+*kx*and*t<sub>y1</sub>*=*t<sub>y0</sub>*+*ky*.If*selection*isatransition,definesa“zoom”tweentranslatingthecurrenttransform.Thismethodisaconveniencemethodfor[*zoom*.transform](#zoom_transform).The*x*and*y*translationamountsmaybespecifiedeitherasnumbersorasfunctionsthatreturnnumbers.Ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentdatum`d`andindex`i`,withthe`this`contextasthecurrentDOMelement.##*zoom*.translateTo(*selection*,*x*,*y*,*p*){#zoom_translateTo}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*selection*isaselection,[translates](#transform_translate)the[currentzoomtransform](#zoomTransform)oftheselectedelementssuchthatthegivenposition⟨*x*,*y*⟩appearsatgivenpoint*p*.Thenew*t<sub>x</sub>*=*p<sub>x</sub>*-*kx*and*t<sub>y</sub>*=*p<sub>y</sub>*-*ky*.If*p*isnotspecified,itdefaultstothecenteroftheviewport[extent](#zoom_extent).If*selection*isatransition,definesa“zoom”tweentranslatingthecurrenttransform.Thismethodisaconveniencemethodfor[*zoom*.transform](#zoom_transform).The*x*and*y*coordinatesmaybespecifiedeitherasnumbersorasfunctionsthatreturnsnumbers;similarlythe*p*pointmaybespecifiedeitherasatwo-elementarray[*p<sub>x</sub>*,*p<sub>y</sub>*]orafunction.Ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentdatum`d`andindex`i`,withthe`this`contextasthecurrentDOMelement.##*zoom*.scaleBy(*selection*,*k*,*p*){#zoom_scaleBy}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*selection*isaselection,[scales](#transform_scale)the[currentzoomtransform](#zoomTransform)oftheselectedelementsby*k*,suchthatthenew*k₁*=*k₀k*.Thereferencepoint*p*doesmove.If*p*isnotspecified,itdefaultstothecenteroftheviewport[extent](#zoom_extent).If*selection*isatransition,definesa“zoom”tweentranslatingthecurrenttransform.Thismethodisaconveniencemethodfor[*zoom*.transform](#zoom_transform).The*k*scalefactormaybespecifiedeitherasanumberorafunctionthatreturnsanumber;similarlythe*p*pointmaybespecifiedeitherasatwo-elementarray[*p<sub>x</sub>*,*p<sub>y</sub>*]orafunction.Ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentdatum`d`andindex`i`,withthe`this`contextasthecurrentDOMelement.##*zoom*.scaleTo(*selection*,*k*,*p*){#zoom_scaleTo}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*selection*isaselection,[scales](#transform_scale)the[currentzoomtransform](#zoomTransform)oftheselectedelementsto*k*,suchthatthenew*k₁*=*k*.Thereferencepoint*p*doesmove.If*p*isnotspecified,itdefaultstothecenteroftheviewport[extent](#zoom_extent).If*selection*isatransition,definesa“zoom”tweentranslatingthecurrenttransform.Thismethodisaconveniencemethodfor[*zoom*.transform](#zoom_transform).The*k*scalefactormaybespecifiedeitherasanumberorafunctionthatreturnsanumber;similarlythe*p*pointmaybespecifiedeitherasatwo-elementarray[*p<sub>x</sub>*,*p<sub>y</sub>*]orafunction.Ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentdatum`d`andindex`i`,withthe`this`contextasthecurrentDOMelement.##*zoom*.constrain(*constrain*){#zoom_constrain}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*constrain*isspecified,setsthetransformconstraintfunctiontothespecifiedfunctionandreturnsthezoombehavior.If*constrain*isnotspecified,returnsthecurrentconstraintfunction,whichdefaultsto:```jsfunctionconstrain(transform,extent,translateExtent){vardx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];returntransform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1));}```Theconstraintfunctionmustreturna[*transform*]#zoomTransform)giventhecurrent*transform*,[viewportextent](#zoom_extent)and[translateextent](#zoom_translateExtent).Thedefaultimplementationattemptstoensurethattheviewportextentdoesnotgooutsidethetranslateextent.##*zoom*.filter(*filter*){#zoom_filter}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*filter*isspecified,setsthefiltertothespecifiedfunctionandreturnsthezoombehavior.If*filter*isnotspecified,returnsthecurrentfilter,whichdefaultsto:```jsfunctionfilter(event){return(!event.ctrlKey||event.type==='wheel')&&!event.button;}```Thefilterispassedthecurrentevent(`event`)anddatum`d`,withthe`this`contextasthecurrentDOMelement.Ifthefilterreturnsfalsey,theinitiatingeventisignoredandnozoomgesturesarestarted.Thus,thefilterdetermineswhichinputeventsareignored.Thedefaultfilterignoresmousedowneventsonsecondarybuttons,sincethosebuttonsaretypicallyintendedforotherpurposes,suchasthecontextmenu.##*zoom*.touchable(*touchable*){#zoom_touchable}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*touchable*isspecified,setsthetouchsupportdetectortothespecifiedfunctionandreturnsthezoombehavior.If*touchable*isnotspecified,returnsthecurrenttouchsupportdetector,whichdefaultsto:```jsfunctiontouchable(){returnnavigator.maxTouchPoints||("ontouchstart"inthis);}```Toucheventlistenersareonlyregisteredifthedetectorreturnstruthyforthecorrespondingelementwhenthezoombehavioris[applied](#_zoom).Thedefaultdetectorworkswellformostbrowsersthatarecapableoftouchinput,butnotall;Chrome’smobiledeviceemulator,forexample,failsdetection.##*zoom*.wheelDelta(*delta*){#zoom_wheelDelta}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*delta*isspecified,setsthewheeldeltafunctiontothespecifiedfunctionandreturnsthezoombehavior.If*delta*isnotspecified,returnsthecurrentwheeldeltafunction,whichdefaultsto:```jsfunctionwheelDelta(event){return-event.deltaY*(event.deltaMode===1?0.05:event.deltaMode?1:0.002)*(event.ctrlKey?10:1);}```Thevalue*Δ*returnedbythewheeldeltafunctiondeterminestheamountofscalingappliedinresponsetoa[WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent).Thescalefactor[*transform*.k](#zoomTransform)ismultipliedby2<sup>*Δ*</sup>;forexample,a*Δ*of+1doublesthescalefactor,*Δ*of-1halvesthescalefactor.##*zoom*.extent(*extent*){#zoom_extent}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*extent*isspecified,setstheviewportextenttothespecifiedarrayofpoints[[*x0*,*y0*],[*x1*,*y1*]],where[*x0*,*y0*]isthetop-leftcorneroftheviewportand[*x1*,*y1*]isthebottom-rightcorneroftheviewport,andreturnsthiszoombehavior.The*extent*mayalsobespecifiedasafunctionwhichreturnssuchanarray;ifafunction,itisinvokedforeachselectedelement,beingpassedthecurrentdatum`d`,withthe`this`contextasthecurrentDOMelement.If*extent*isnotspecified,returnsthecurrentextentaccessor,whichdefaultsto[[0,0],[*width*,*height*]]where*width*isthe[clientwidth](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth)oftheelementand*height*isits[clientheight](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight);forSVGelements,thenearestancestorSVGelement’sviewBox,or[width](https://www.w3.org/TR/SVG/struct.html#SVGElementWidthAttribute)and[height](https://www.w3.org/TR/SVG/struct.html#SVGElementHeightAttribute)attributes,areused.Alternatively,considerusing[*element*.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).Theviewportextentaffectsseveralfunctions:thecenteroftheviewportremainsfixedduringchangesby[*zoom*.scaleBy](#zoom_scaleBy)and[*zoom*.scaleTo](#zoom_scaleTo);theviewportcenteranddimensionsaffectthepathchosenby[interpolateZoom](./d3-interpolate/zoom.md#interpolateZoom);andtheviewportextentisneededtoenforcetheoptional[translateextent](#zoom_translateExtent).##*zoom*.scaleExtent(*extent*){#zoom_scaleExtent}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*extent*isspecified,setsthescaleextenttothespecifiedarrayofnumbers[*k0*,*k1*]where*k0*istheminimumallowedscalefactorand*k1*isthemaximumallowedscalefactor,andreturnsthiszoombehavior.If*extent*isnotspecified,returnsthecurrentscaleextent,whichdefaultsto[0,∞].Thescaleextentrestrictszoominginandout.Itisenforcedoninteractionandwhenusing[*zoom*.scaleBy](#zoom_scaleBy),[*zoom*.scaleTo](#zoom_scaleTo)and[*zoom*.translateBy](#zoom_translateBy);however,itisnotenforcedwhenusing[*zoom*.transform](#zoom_transform)tosetthetransformexplicitly.Iftheusertriestozoombywheelingwhenalreadyatthecorrespondinglimitofthescaleextent,thewheeleventswillbeignoredandnotinitiateazoomgesture.Thisallowstheusertoscrolldownpastazoomableareaafterzoomingin,ortoscrollupafterzoomingout.Ifyouwouldprefertoalwayspreventscrollingonwheelinputregardlessofthescaleextent,registerawheeleventlistenertopreventthebrowserdefaultbehavior:```jsselection.call(zoom).on("wheel",event=>event.preventDefault());```##*zoom*.translateExtent(*extent*){#zoom_translateExtent}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*extent*isspecified,setsthetranslateextenttothespecifiedarrayofpoints[[*x0*,*y0*],[*x1*,*y1*]],where[*x0*,*y0*]isthetop-leftcorneroftheworldand[*x1*,*y1*]isthebottom-rightcorneroftheworld,andreturnsthiszoombehavior.If*extent*isnotspecified,returnsthecurrenttranslateextent,whichdefaultsto[[-∞,-∞],[+∞,+∞]].Thetranslateextentrestrictspanning,andmaycausetranslationonzoomout.Itisenforcedoninteractionandwhenusing[*zoom*.scaleBy](#zoom_scaleBy),[*zoom*.scaleTo](#zoom_scaleTo)and[*zoom*.translateBy](#zoom_translateBy);however,itisnotenforcedwhenusing[*zoom*.transform](#zoom_transform)tosetthetransformexplicitly.##*zoom*.clickDistance(*distance*){#zoom_clickDistance}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*distance*isspecified,setsthemaximumdistancethatthemousecanmovebetweenmousedownandmouseupthatwilltriggerasubsequentclickevent.Ifatanypointbetweenmousedownandmouseupthemouseisgreaterthanorequalto*distance*fromitspositiononmousedown,theclickeventfollowingmouseupwillbesuppressed.If*distance*isnotspecified,returnsthecurrentdistancethreshold,whichdefaultstozero.Thedistancethresholdismeasuredinclientcoordinates([*event*.clientX](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientX)and[*event*.clientY](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientY)).##*zoom*.tapDistance(*distance*){#zoom_tapDistance}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*distance*isspecified,setsthemaximumdistancethatadouble-tapgesturecanmovebetweenfirsttouchstartandsecondtouchendthatwilltriggerasubsequentdouble-clickevent.If*distance*isnotspecified,returnsthecurrentdistancethreshold,whichdefaultsto10.Thedistancethresholdismeasuredinclientcoordinates([*event*.clientX](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientX)and[*event*.clientY](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientY)).##*zoom*.duration(*duration*){#zoom_duration}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*duration*isspecified,setsthedurationforzoomtransitionsondouble-clickanddouble-taptothespecifiednumberofmillisecondsandreturnsthezoombehavior.If*duration*isnotspecified,returnsthecurrentduration,whichdefaultsto250milliseconds.Ifthedurationisnotgreaterthanzero,double-clickand-taptriggerinstantaneouschangestothezoomtransformratherthaninitiatingsmoothtransitions.Todisabledouble-clickanddouble-taptransitions,youcanremovethezoombehavior’sdblclickeventlistenerafterapplyingthezoombehaviortotheselection:```jsselection.call(zoom).on("dblclick.zoom",null);```##*zoom*.interpolate(*interpolate*){#zoom_interpolate}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*interpolate*isspecified,setstheinterpolationfactoryforzoomtransitionstothespecifiedfunction.If*interpolate*isnotspecified,returnsthecurrentinterpolationfactory,whichdefaultsto[interpolateZoom](./d3-interpolate/zoom.md#interpolateZoom)toimplementsmoothzooming.Toapplydirectinterpolationbetweentwoviews,try[interpolate](./d3-interpolate/value.md#interpolate)instead.##*zoom*.on(*typenames*,*listener*){#zoom_on}[Source](https://github.com/d3/d3-zoom/blob/main/src/zoom.js)·If*listener*isspecified,setstheevent*listener*forthespecified*typenames*andreturnsthezoombehavior.Ifaneventlistenerwasalreadyregisteredforthesametypeandname,theexistinglistenerisremovedbeforethenewlistenerisadded.If*listener*isnull,removesthecurrenteventlistenersforthespecified*typenames*,ifany.If*listener*isnotspecified,returnsthefirstcurrently-assignedlistenermatchingthespecified*typenames*,ifany.Whenaspecifiedeventisdispatched,each*listener*willbeinvokedwiththesamecontextandargumentsas[*selection*.on](./d3-selection/events.md#selection_on)listeners:thecurrentevent(`event`)anddatum`d`,withthe`this`contextasthecurrentDOMelement.The*typenames*isastringcontainingoneormore*typename*separatedbywhitespace.Each*typename*isa*type*,optionallyfollowedbyaperiod(`.`)anda*name*,suchas`zoom.foo`and`zoom.bar`;thenameallowsmultiplelistenerstoberegisteredforthesame*type*.The*type*mustbeoneofthefollowing:*`start`-afterzoomingbegins(suchasonmousedown).*`zoom`-afterachangetothezoomtransform(suchasonmousemove).*`end`-afterzoomingends(suchasonmouseup).See[*dispatch*.on](./d3-dispatch.md#dispatch_on)formore.##ZoomeventsWhena[zoomeventlistener](#zoom_on)isinvoked,itreceivesthecurrentzoomeventasafirstargument.The*event*objectexposesseveralfields:**event*.target-theassociated[zoombehavior](#zoom).**event*.type-thestring“start”,“zoom”or“end”;see[*zoom*.on](#zoom_on).**event*.transform-thecurrent[zoomtransform](#zoomTransform).**event*.sourceEvent-theunderlyinginputevent,suchasmousemoveortouchmove.Thezoombehaviorhandlesavarietyofinteractionevents:|Event|ListeningElement|ZoomEvent|DefaultPrevented?||------------|-----------------|-----------|------------------||mousedown⁵|selection|start|no¹||mousemove²|window¹|zoom|yes||mouseup²|window¹|end|yes||dragstart²|window|-|yes||selectstart²|window|-|yes||click³|window|-|yes||dblclick|selection|*multiple*⁶|yes||wheel⁸|selection|zoom⁷|yes||touchstart|selection|*multiple*⁶|no⁴||touchmove|selection|zoom|yes||touchend|selection|end|no⁴||touchcancel|selection|end|no⁴|Thepropagationofallconsumedeventsis[immediatelystopped](https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation).¹Necessarytocaptureeventsoutsideaniframe;see[d3-drag#9](https://github.com/d3/d3-drag/issues/9).<br>²Onlyappliesduringanactive,mouse-basedgesture;see[d3-drag#9](https://github.com/d3/d3-drag/issues/9).<br>³Onlyappliesimmediatelyaftersomemouse-basedgestures;see[*zoom*.clickDistance](#zoom_clickDistance).<br>⁴Necessarytoallow[clickemulation](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW7)ontouchinput;see[d3-drag#9](https://github.com/d3/d3-drag/issues/9).<br>⁵Ignoredifwithin500msofatouchgestureending;assumes[clickemulation](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW7).<br>⁶Double-clickanddouble-tapinitiateatransitionthatemitsstart,zoomandendevents;see[*zoom*.tapDistance](#zoom_tapDistance).<br>⁷Thefirstwheeleventemitsastartevent;anendeventisemittedwhennowheeleventsarereceivedfor150ms.<br>⁸Ignoredifalreadyatthecorrespondinglimitofthe[scaleextent](#zoom_scaleExtent).##zoomTransform(*node*){#zoomTransform}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsthecurrenttransformforthespecified*node*.Notethat*node*shouldtypicallybeaDOMelement,nota*selection*.(Aselectionmayconsistofmultiplenodes,indifferentstates,andthisfunctiononlyreturnsasingletransform.)Ifyouhaveaselection,call[*selection*.node](./d3-selection/control-flow.md#selection_node)first:```jsvartransform=d3.zoomTransform(selection.node());```Inthecontextofan[eventlistener](./d3-selection/events.md#selection_on),the*node*istypicallytheelementthatreceivedtheinputevent(whichshouldbeequalto[*event*.transform](#zoom-events)),*this*:```jsvartransform=d3.zoomTransform(this);```Internally,anelement’stransformisstoredas*element*.\_\_zoom;however,youshouldusethismethodratherthanaccessingitdirectly.Ifthegiven*node*hasnodefinedtransform,returnsthetransformoftheclosestancestor,orifnoneexists,the[identitytransformation](#zoomIdentity).Thereturnedtransformrepresentsatwo-dimensional[transformationmatrix](https://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations)oftheform:*k*0*t<sub>x</sub>*<br>0*k**t<sub>y</sub>*<br>001(Thismatrixiscapableofrepresentingonlyscaleandtranslation;afuturereleasemayalsoallowrotation,thoughthiswouldprobablynotbeabackwards-compatiblechange.)Theposition⟨*x*,*y*⟩istransformedto⟨*xk*+*t<sub>x</sub>*,*yk*+*t<sub>y</sub>*⟩.Thetransformobjectexposesthefollowingproperties:**transform*.x-thetranslationamount*t<sub>x</sub>*alongthe*x*-axis.**transform*.y-thetranslationamount*t<sub>y</sub>*alongthe*y*-axis.**transform*.k-thescalefactor*k*.Thesepropertiesshouldbeconsideredread-only;insteadofmutatingatransform,use[*transform*.scale](#transform_scale)and[*transform*.translate](#transform_translate)toderiveanewtransform.Alsosee[*zoom*.scaleBy](#zoom_scaleBy),[*zoom*.scaleTo](#zoom_scaleTo)and[*zoom*.translateBy](#zoom_translateBy)forconveniencemethodsonthezoombehavior.Tocreateatransformwithagiven*k*,*t<sub>x</sub>*,and*t<sub>y</sub>*:```jsvart=d3.zoomIdentity.translate(x,y).scale(k);```Toapplythetransformationtoa[Canvas2Dcontext](https://www.w3.org/TR/2dcontext/),use[*context*.translate](https://www.w3.org/TR/2dcontext/#dom-context-2d-translate)followedby[*context*.scale](https://www.w3.org/TR/2dcontext/#dom-context-2d-scale):```jscontext.translate(transform.x,transform.y);context.scale(transform.k,transform.k);```Similarly,toapplythetransformationtoHTMLelementsvia[CSS](https://www.w3.org/TR/css-transforms-1/):```jsdiv.style("transform","translate("+transform.x+"px,"+transform.y+"px)scale("+transform.k+")");div.style("transform-origin","00");```Toapplythetransformationto[SVG](https://www.w3.org/TR/SVG/coords.html#TransformAttribute):```jsg.attr("transform","translate("+transform.x+","+transform.y+")scale("+transform.k+")");```Ormoresimply,takingadvantageof[*transform*.toString](#transform_toString):```jsg.attr("transform",transform);```Notethattheorderoftransformationsmatters!Thetranslatemustbeappliedbeforethescale.##zoomIdentity{#zoomIdentity}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Theidentitytransform,where*k*=1,*t<sub>x</sub>*=*t<sub>y</sub>*=0.##newd3.ZoomTransform(*k*,*x*,*y*){#ZoomTransform}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsatransformwithscale*k*andtranslation(*x*,*y*).##*transform*.scale(*k*){#transform_scale}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsatransformwhosescale*k₁*isequalto*k₀k*,where*k₀*isthistransform’sscale.##*transform*.translate(*x*,*y*){#transform_translate}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsatransformwhosetranslation*t<sub>x1</sub>*and*t<sub>y1</sub>*isequalto*t<sub>x0</sub>*+*t<sub>k</sub>x*and*t<sub>y0</sub>*+*t<sub>k</sub>y*,where*t<sub>x0</sub>*and*t<sub>y0</sub>*isthistransform’stranslationand*t<sub>k</sub>*isthistransform’sscale.##*transform*.apply(*point*){#transform_apply}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsthetransformationofthespecified*point*whichisatwo-elementarrayofnumbers[*x*,*y*].Thereturnedpointisequalto[*xk*+*t<sub>x</sub>*,*yk*+*t<sub>y</sub>*].##*transform*.applyX(*x*){#transform_applyX}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsthetransformationofthespecified*x*-coordinate,*xk*+*t<sub>x</sub>*.##*transform*.applyY(*y*){#transform_applyY}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsthetransformationofthespecifiedycoordinate,*yk*+*t<sub>y</sub>*.##*transform*.invert(*point*){#transform_invert}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnstheinversetransformationofthespecified*point*whichisatwo-elementarrayofnumbers[*x*,*y*].Thereturnedpointisequalto[(*x*-*t<sub>x</sub>*)/*k*,(*y*-*t<sub>y</sub>*)/*k*].##*transform*.invertX(*x*){#transform_invertX}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnstheinversetransformationofthespecified*x*-coordinate,(*x*-*t<sub>x</sub>*)/*k*.##*transform*.invertY(*y*){#transform_invertY}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnstheinversetransformationofthespecifiedycoordinate,(*y*-*t<sub>y</sub>*)/*k*.##*transform*.rescaleX(*x*){#transform_rescaleX}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsa[copy](./d3-scale/linear.md#linear_copy)ofthe[continuousscale](./d3-scale/linear.md)*x*whose[domain](./d3-scale/linear.md#linear_domain)istransformed.Thisisimplementedbyfirstapplyingthe[inverse*x*-transform](#transform_invertX)onthescale’s[range](./d3-scale/linear.md#linear_range),andthenapplyingthe[inversescale](./d3-scale/linear.md#linear_invert)tocomputethecorrespondingdomain:```jsfunctionrescaleX(x){varrange=x.range().map(transform.invertX,transform),domain=range.map(x.invert,x);returnx.copy().domain(domain);}```Thescale*x*mustuse[interpolateNumber](./d3-interpolate/value.md#interpolateNumber);donotuse[*continuous*.rangeRound](./d3-scale/linear.md#linear_rangeRound)asthisreducestheaccuracyof[*continuous*.invert](./d3-scale/linear.md#linear_invert)andcanleadtoaninaccuraterescaleddomain.Thismethoddoesnotmodifytheinputscale*x*;*x*thusrepresentstheuntransformedscale,whilethereturnedscalerepresentsitstransformedview.##*transform*.rescaleY(*y*){#transform_rescaleY}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsa[copy](./d3-scale/linear.md#linear_copy)ofthe[continuousscale](./d3-scale/linear.md)*y*whose[domain](./d3-scale/linear.md#linear_domain)istransformed.Thisisimplementedbyfirstapplyingthe[inverse*y*-transform](#transform_invertY)onthescale’s[range](./d3-scale/linear.md#linear_range),andthenapplyingthe[inversescale](./d3-scale/linear.md#linear_invert)tocomputethecorrespondingdomain:```jsfunctionrescaleY(y){varrange=y.range().map(transform.invertY,transform),domain=range.map(y.invert,y);returny.copy().domain(domain);}```Thescale*y*mustuse[interpolateNumber](./d3-interpolate/value.md#interpolateNumber);donotuse[*continuous*.rangeRound](./d3-scale/linear.md#linear_rangeRound)asthisreducestheaccuracyof[*continuous*.invert](./d3-scale/linear.md#linear_invert)andcanleadtoaninaccuraterescaleddomain.Thismethoddoesnotmodifytheinputscale*y*;*y*thusrepresentstheuntransformedscale,whilethereturnedscalerepresentsitstransformedview.##*transform*.toString(){#transform_toString}[Source](https://github.com/d3/d3-zoom/blob/main/src/transform.js)·Returnsastringrepresentingthe[SVGtransform](https://www.w3.org/TR/SVG/coords.html#TransformAttribute)correspondingtothistransform.Implementedas:```jsfunctiontoString(){return"translate("+this.x+","+this.y+")scale("+this.k+")";}```