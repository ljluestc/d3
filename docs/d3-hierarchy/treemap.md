#Treemap{#Treemap}[<imgalt="Treemap"src="https://raw.githubusercontent.com/d3/d3-hierarchy/main/img/treemap.png">](https://observablehq.com/@d3/treemap/2?intent=fork)[Examples](https://observablehq.com/@d3/treemap/2?intent=fork)·Introducedby[BenShneiderman](http://www.cs.umd.edu/hcil/treemap-history/)in1991,a**treemap**recursivelysubdividesareaintorectanglesaccordingtoeachnode’sassociatedvalue.D3’streemapimplementationsupportsanextensible[tilingmethod](#treemap_tile):thedefault[squarified](#treemapSquarify)methodseekstogeneraterectangleswitha[golden](https://en.wikipedia.org/wiki/Golden_ratio)aspectratio;thisoffersbetterreadabilityandsizeestimationthan[slice-and-dice](#treemapSliceDice),whichsimplyalternatesbetweenhorizontalandverticalsubdivisionbydepth.##treemap(){#treemap}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·Createsanewtreemaplayoutwithdefaultsettings.##*treemap*(*root*){#_treemap}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·Laysoutthespecified*root*[hierarchy](./hierarchy.md),assigningthefollowingpropertieson*root*anditsdescendants:**node*.x0-theleftedgeoftherectangle**node*.y0-thetopedgeoftherectangle**node*.x1-therightedgeoftherectangle**node*.y1-thebottomedgeoftherectangleYoumustcall[*root*.sum](./hierarchy.md#node_sum)beforepassingthehierarchytothetreemaplayout.Youprobablyalsowanttocall[*root*.sort](./hierarchy.md#node_sort)toorderthehierarchybeforecomputingthelayout.##*treemap*.tile(*tile*){#treemap_tile}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*tile*isspecified,setsthe[tilingmethod](#treemap-tiling)tothespecifiedfunctionandreturnsthistreemaplayout.If*tile*isnotspecified,returnsthecurrenttilingmethod,whichdefaultsto[treemapSquarify](#treemapSquarify)withthegoldenratio.##*treemap*.size(*size*){#treemap_size}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*size*isspecified,setsthistreemaplayout’ssizetothespecifiedtwo-elementarrayofnumbers[*width*,*height*]andreturnsthistreemaplayout.If*size*isnotspecified,returnsthecurrentsize,whichdefaultsto[1,1].##*treemap*.round(*round*){#treemap_round}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*round*isspecified,enablesordisablesroundingaccordingtothegivenbooleanandreturnsthistreemaplayout.If*round*isnotspecified,returnsthecurrentroundingstate,whichdefaultstofalse.##*treemap*.padding(*padding*){#treemap_padding}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*padding*isspecified,setsthe[inner](#treemap_paddingInner)and[outer](#treemap_paddingOuter)paddingtothespecifiednumberorfunctionandreturnsthistreemaplayout.If*padding*isnotspecified,returnsthecurrentinnerpaddingfunction.##*treemap*.paddingInner(*padding*){#treemap_paddingInner}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*padding*isspecified,setstheinnerpaddingtothespecifiednumberorfunctionandreturnsthistreemaplayout.If*padding*isnotspecified,returnsthecurrentinnerpaddingfunction,whichdefaultstotheconstantzero.If*padding*isafunction,itisinvokedforeachnodewithchildren,beingpassedthecurrentnode.Theinnerpaddingisusedtoseparateanode’sadjacentchildren.##*treemap*.paddingOuter(*padding*){#treemap_paddingOuter}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*padding*isspecified,setsthe[top](#treemap_paddingTop),[right](#treemap_paddingRight),[bottom](#treemap_paddingBottom)and[left](#treemap_paddingLeft)paddingtothespecifiednumberorfunctionandreturnsthistreemaplayout.If*padding*isnotspecified,returnsthecurrenttoppaddingfunction.##*treemap*.paddingTop(*padding*){#treemap_paddingTop}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*padding*isspecified,setsthetoppaddingtothespecifiednumberorfunctionandreturnsthistreemaplayout.If*padding*isnotspecified,returnsthecurrenttoppaddingfunction,whichdefaultstotheconstantzero.If*padding*isafunction,itisinvokedforeachnodewithchildren,beingpassedthecurrentnode.Thetoppaddingisusedtoseparatethetopedgeofanodefromitschildren.##*treemap*.paddingRight(*padding*){#treemap_paddingRight}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*padding*isspecified,setstherightpaddingtothespecifiednumberorfunctionandreturnsthistreemaplayout.If*padding*isnotspecified,returnsthecurrentrightpaddingfunction,whichdefaultstotheconstantzero.If*padding*isafunction,itisinvokedforeachnodewithchildren,beingpassedthecurrentnode.Therightpaddingisusedtoseparatetherightedgeofanodefromitschildren.##*treemap*.paddingBottom(*padding*){#treemap_paddingBottom}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*padding*isspecified,setsthebottompaddingtothespecifiednumberorfunctionandreturnsthistreemaplayout.If*padding*isnotspecified,returnsthecurrentbottompaddingfunction,whichdefaultstotheconstantzero.If*padding*isafunction,itisinvokedforeachnodewithchildren,beingpassedthecurrentnode.Thebottompaddingisusedtoseparatethebottomedgeofanodefromitschildren.##*treemap*.paddingLeft(*padding*){#treemap_paddingLeft}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/index.js)·If*padding*isspecified,setstheleftpaddingtothespecifiednumberorfunctionandreturnsthistreemaplayout.If*padding*isnotspecified,returnsthecurrentleftpaddingfunction,whichdefaultstotheconstantzero.If*padding*isafunction,itisinvokedforeachnodewithchildren,beingpassedthecurrentnode.Theleftpaddingisusedtoseparatetheleftedgeofanodefromitschildren.##TreemaptilingSeveralbuilt-intilingmethodsareprovidedforusewith[*treemap*.tile](#treemap_tile).###treemapBinary(*node*,*x0*,*y0*,*x1*,*y1*){#treemapBinary}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/binary.js)·Recursivelypartitionsthespecified*nodes*intoanapproximately-balancedbinarytree,choosinghorizontalpartitioningforwiderectanglesandverticalpartitioningfortallrectangles.###treemapDice(*node*,*x0*,*y0*,*x1*,*y1*){#treemapDice}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/dice.js)·Dividestherectangularareaspecifiedby*x0*,*y0*,*x1*,*y1*horizontallyaccordingthevalueofeachofthespecified*node*’schildren.Thechildrenarepositionedinorder,startingwiththeleftedge(*x0*)ofthegivenrectangle.Ifthesumofthechildren’svaluesislessthanthespecified*node*’svalue(*i.e.*,ifthespecified*node*hasanon-zerointernalvalue),theremainingemptyspacewillbepositionedontherightedge(*x1*)ofthegivenrectangle.###treemapSlice(*node*,*x0*,*y0*,*x1*,*y1*){#treemapSlice}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/slice.js)·Dividestherectangularareaspecifiedby*x0*,*y0*,*x1*,*y1*verticallyaccordingthevalueofeachofthespecified*node*’schildren.Thechildrenarepositionedinorder,startingwiththetopedge(*y0*)ofthegivenrectangle.Ifthesumofthechildren’svaluesislessthanthespecified*node*’svalue(*i.e.*,ifthespecified*node*hasanon-zerointernalvalue),theremainingemptyspacewillbepositionedonthebottomedge(*y1*)ofthegivenrectangle.###treemapSliceDice(*node*,*x0*,*y0*,*x1*,*y1*){#treemapSliceDice}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/sliceDice.js)·Ifthespecified*node*hasodddepth,delegatesto[treemapSlice](#treemapSlice);otherwisedelegatesto[treemapDice](#treemapDice).###treemapSquarify(*node*,*x0*,*y0*,*x1*,*y1*){#treemapSquarify}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/squarify.js)·Implementsthe[squarifiedtreemap](https://www.win.tue.nl/~vanwijk/stm.pdf)algorithmbyBruls*etal.*,whichseekstoproducerectanglesofagiven[aspectratio](#squarify_ratio).###treemapResquarify(*node*,*x0*,*y0*,*x1*,*y1*){#treemapResquarify}[Examples](https://observablehq.com/@d3/animated-treemap)·[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/resquarify.js)·Like[treemapSquarify](#treemapSquarify),exceptpreservesthetopology(nodeadjacencies)ofthepreviouslayoutcomputedbyd3.treemapResquarify,ifthereisoneanditusedthesame[targetaspectratio](#squarify_ratio).Thistilingmethodisgoodforanimatingchangestotreemapsbecauseitonlychangesnodesizesandnottheirrelativepositions,thusavoidingdistractingshufflingandocclusion.Thedownsideofastableupdate,however,isasuboptimallayoutforsubsequentupdates:onlythefirstlayoutusestheBruls*etal.*squarifiedalgorithm.###*squarify*.ratio(*ratio*){#squarify_ratio}[Source](https://github.com/d3/d3-hierarchy/blob/main/src/treemap/squarify.js)·Specifiesthedesiredaspectratioofthegeneratedrectangles.The*ratio*mustbespecifiedasanumbergreaterthanorequaltoone.Notethattheorientationofthegeneratedrectangles(tallorwide)isnotimpliedbytheratio;forexample,aratiooftwowillattempttoproduceamixtureofrectangleswhose*width*:*height*ratioiseither2:1or1:2.(However,youcanapproximatelyachievethisresultbygeneratingasquaretreemapatdifferentdimensions,andthen[stretchingthetreemap](https://observablehq.com/@d3/stretched-treemap)tothedesiredaspectratio.)Furthermore,thespecified*ratio*ismerelyahinttothetilingalgorithm;therectanglesarenotguaranteedtohavethespecifiedaspectratio.Ifnotspecified,theaspectratiodefaultstothegoldenratio,φ=(1+sqrt(5))/2,per[Kong*etal.*](http://vis.stanford.edu/papers/perception-treemaps)