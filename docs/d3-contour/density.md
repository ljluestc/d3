#DensityestimationContourscanshowtheestimateddensityofpointclouds,whichisusefultoavoidoverplottinginlargedatasets.The[contourDensity](#contourDensity)methodimplementsfasttwo-dimensionalkerneldensityestimation.HereisascatterplotshowingtherelationshipbetweentheidledurationanderuptiondurationforOldFaithful:[<imgalt="DensityContours"src="https://raw.githubusercontent.com/d3/d3-contour/main/img/faithful.png"width="420"height="219">](https://observablehq.com/@d3/density-contours)Andhereisadensitycontourplotshowingtherelationshipbetweentheweightandpriceof53,940diamonds:[<imgalt="DensityContours"src="https://raw.githubusercontent.com/d3/d3-contour/main/img/diamonds.png"width="420"height="420">](https://observablehq.com/@d3/density-contours)##contourDensity(){#contourDensity}[Examples](https://observablehq.com/@d3/density-contours)·[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·Constructsanewdensityestimatorwiththedefaultsettings.##*density*(*data*){#_density}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·Estimatesthedensitycontoursforthegivenarrayof*data*,returninganarrayof[GeoJSON](http://geojson.org/geojson-spec.html)[MultiPolygon](http://geojson.org/geojson-spec.html#multipolygon)[geometryobjects](http://geojson.org/geojson-spec.html#geometry-objects).Eachgeometryobjectrepresentstheareawheretheestimatednumberofpointspersquarepixelisgreaterthanorequaltothecorresponding[thresholdvalue](#density_thresholds);thethresholdvalueforeachgeometryobjectisexposedas<i>geometry</i>.value.Thereturnedgeometryobjectsaretypicallypassedto[geoPath](../d3-geo/path.md)todisplay,usingnullor[geoIdentity](../d3-geo/projection.md#geoIdentity)astheassociatedprojection.Seealso[contours](./contour.md).Thexandycoordinateforeachdatapointarecomputedusing[*density*.x](#density_x)and[*density*.y](#density_y).Inaddition,[*density*.weight](#density_weight)indicatestherelativecontributionofeachdatapoint(default1).Thegeneratedcontoursareonlyaccuratewithintheestimator’s[definedsize](#density_size).##*density*.x(*x*){#density_x}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·If*x*isspecified,setsthe*x*-coordinateaccessor.If*x*isnotspecified,returnsthecurrent*x*-coordinateaccessor,whichdefaultsto:```jsfunctionx(d){returnd[0];}```##*density*.y(*y*){#density_y}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·If*y*isspecified,setsthe*y*-coordinateaccessor.If*y*isnotspecified,returnsthecurrent*y*-coordinateaccessor,whichdefaultsto:```jsfunctiony(d){returnd[1];}```##*density*.weight(*weight*){#density_weight}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·If*weight*isspecified,setstheaccessorforpointweights.If*weight*isnotspecified,returnsthecurrentpointweightaccessor,whichdefaultsto:```jsfunctionweight(){return1;}```##*density*.size(*size*){#density_size}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·If*size*isspecified,setsthesizeofthedensityestimatortothespecifiedboundsandreturnstheestimator.The*size*isspecifiedasanarray\[<i>width</i>,<i>height</i>\],where<i>width</i>isthemaximum*x*-valueand<i>height</i>isthemaximum*y*-value.If*size*isnotspecified,returnsthecurrentsizewhichdefaultsto[960,500].The[estimateddensitycontours](#_density)areonlyaccuratewithinthedefinedsize.##*density*.cellSize(*cellSize*){#density_cellSize}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·If*cellSize*isspecified,setsthesizeofindividualcellsintheunderlyingbingridtothespecifiedpositiveintegerandreturnstheestimator.If*cellSize*isnotspecified,returnsthecurrentcellsize,whichdefaultsto4.Thecellsizeisroundeddowntothenearestpoweroftwo.Smallercellsproducemoredetailedcontourpolygons,butaremoreexpensivetocompute.##*density*.thresholds(*thresholds*){#density_thresholds}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·If*thresholds*isspecified,setsthethresholdgeneratortothespecifiedfunctionorarrayandreturnsthiscontourgenerator.If*thresholds*isnotspecified,returnsthecurrentthresholdgenerator,whichbydefaultgeneratesabouttwentynicely-roundeddensitythresholds.Thresholdsaredefinedasanarrayofvalues[*x0*,*x1*,…].Thefirst[generateddensitycontour](#_density)correspondstotheareawheretheestimateddensityisgreaterthanorequalto*x0*;thesecondcontourcorrespondstotheareawheretheestimateddensityisgreaterthanorequalto*x1*,andsoon.Thus,thereisexactlyonegeneratedMultiPolygongeometryobjectforeachspecifiedthresholdvalue;thethresholdvalueisexposedas<i>geometry</i>.value.Thefirstvalue*x0*shouldtypicallybegreaterthanzero.Ifa*count*isspecifiedinsteadofanarrayof*thresholds*,thenapproximately*count*uniformly-spacednicely-roundedthresholdswillbegenerated;see[ticks](../d3-array/ticks.md#ticks).##*density*.bandwidth(*bandwidth*){#density_bandwidth}[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·If*bandwidth*isspecified,setsthebandwidth(thestandarddeviation)oftheGaussiankernelandreturnstheestimate.If*bandwidth*isnotspecified,returnsthecurrentbandwidth,whichdefaultsto20.4939….Thespecified*bandwidth*iscurrentlyroundedtothenearestsupportedvaluebythisimplementation,andmustbenonnegative.##*density*.contours(*data*){#density_contours}[Examples](https://observablehq.com/@d3/density-contours-data)·[Source](https://github.com/d3/d3-contour/blob/main/src/density.js)·Returna*contour*(*value*)functionthatcanbeusedtocomputeanarbitrarycontouronthegivendatawithoutneedingtorecomputetheunderlyinggrid.Thereturned*contour*functionalsoexposesa*contour*.maxvaluewhichrepresentsthemaximumdensityofthegrid.