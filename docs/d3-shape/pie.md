<scriptsetup>importExampleArcsfrom"../components/ExampleArcs.vue";import{ref}from"vue";constpadAngle=ref(0.03);</script>#Pies[Examples](https://observablehq.com/@d3/donut-chart/2?intent=fork)·Thepiegeneratorcomputesthenecessaryanglestorepresentatabulardatasetasapieordonutchart;theseanglescanthenbepassedtoan[arcgenerator](./arc.md).(Thepiegeneratordoesnotproduceashapedirectly.)##pie(){#pie}[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·Constructsanewpiegeneratorwiththedefaultsettings.```jsconstpie=d3.pie();```##*pie*(*data*,...*arguments*){#_pie}[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·Generatesapieforthegivenarrayof*data*,returninganarrayofobjectsrepresentingeachdatum’sarcangles.Forexample,givenasetofnumbers,hereishowtocomputetheanglesforapiechart:```jsconstdata=[1,1,2,3,5,8,13,21];constpie=d3.pie();constarcs=pie(data);```Theresulting`arcs`isanarrayofobjects:```json[{"data":1,"value":1,"index":6,"startAngle":6.050474740247008,"endAngle":6.166830023713296,"padAngle":0},{"data":1,"value":1,"index":7,"startAngle":6.166830023713296,"endAngle":6.283185307179584,"padAngle":0},{"data":2,"value":2,"index":5,"startAngle":5.817764173314431,"endAngle":6.050474740247008,"padAngle":0},{"data":3,"value":3,"index":4,"startAngle":5.468698322915565,"endAngle":5.817764173314431,"padAngle":0},{"data":5,"value":5,"index":3,"startAngle":4.886921905584122,"endAngle":5.468698322915565,"padAngle":0},{"data":8,"value":8,"index":2,"startAngle":3.956079637853813,"endAngle":4.886921905584122,"padAngle":0},{"data":13,"value":13,"index":1,"startAngle":2.443460952792061,"endAngle":3.956079637853813,"padAngle":0},{"data":21,"value":21,"index":0,"startAngle":0.000000000000000,"endAngle":2.443460952792061,"padAngle":0}]```Eachobjectinthereturnedarrayhasthefollowingproperties:*`data`-theinputdatum;thecorrespondingelementintheinputdataarray.*`value`-thenumeric[value](#pie_value)ofthearc.*`index`-thezero-based[sortedindex](#pie_sort)ofthearc.*`startAngle`-the[startangle](#pie_startAngle)ofthearc.*`endAngle`-the[endangle](#pie_endAngle)ofthearc.*`padAngle`-the[padangle](#pie_padAngle)ofthearc.Thisrepresentationisdesignedtoworkwiththearcgenerator’sdefault[startAngle](./arc.md#arc_startAngle),[endAngle](./arc.md#arc_endAngle)and[padAngle](./arc.md#arc_padAngle)accessors.Anglesareinradians,with0at-*y*(12o’clock)andpositiveanglesproceedingclockwise.Thelengthofthereturnedarrayisthesameas*data*,andeachelement*i*inthereturnedarraycorrespondstotheelement*i*intheinputdata.Thereturnedarrayofarcsisinthesameorderasthedata,evenwhenthepiechartis[sorted](#pie_sortValues).Anyadditional*arguments*arearbitrary;theyarepropagatedtothepiegenerator’saccessorfunctionsalongwiththe`this`object.##*pie*.value(*value*){#pie_value}[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·If*value*isspecified,setsthevalueaccessortothespecifiedfunctionornumberandreturnsthispiegenerator.```jsconstpie=d3.pie().value((d)=>d.value);```Whenapieis[generated](#_pie),thevalueaccessorwillbeinvokedforeachelementintheinputdataarray,beingpassedtheelement`d`,theindex`i`,andthearray`data`asthreearguments.If*value*isnotspecified,returnsthecurrentvalueaccessor.```jspie.value()//(d)=>d.value```Thevalueaccessordefaultsto:```jsfunctionvalue(d){returnd;}```Thedefaultvalueaccessorassumesthattheinputdataarenumbers,orthattheyarecoercibletonumbersusing[valueOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf).Ifyourdataarenotnumbers,thenyoushouldspecifyanaccessorthatreturnsthecorrespondingnumericvalueforagivendatum.Forexample,givenaCSVfilewith*number*and*name*fields:```number,name4,Locke8,Reyes15,Ford16,Jarrah23,Shephard42,Kwon```Youmightsay:```jsconstdata=awaitd3.csv("lost.csv",d3.autoType);constpie=d3.pie().value((d)=>d.number);constarcs=pie(data);```Thisissimilarto[mapping](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)yourdatatovaluesbeforeinvokingthepiegenerator:```jsconstarcs=d3.pie()(data.map((d)=>d.number));```Thebenefitofanaccessoristhattheinputdataremainsassociatedwiththereturnedobjects,therebymakingiteasiertoaccessotherfieldsofthedata,forexampletosetthecolorortoaddtextlabels.##*pie*.sort(*compare*){#pie_sort}[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·If*compare*isspecified,setsthedatacomparatortothespecifiedfunctionandreturnsthispiegenerator.```jsconstpie=d3.pie().sort((a,b)=>d3.ascending(a.name,b.name));```Thedatacomparatortakestwoarguments*a*and*b*,eachelementsfromtheinputdataarray.Ifthearcfor*a*shouldbebeforethearcfor*b*,thenthecomparatormustreturnanumberlessthanzero;ifthearcfor*a*shouldbeafterthearcfor*b*,thenthecomparatormustreturnanumbergreaterthanzero;returningzeromeansthattherelativeorderof*a*and*b*isunspecified.If*compare*isnotspecified,returnsthecurrentdatacomparator.```jspie.sort()//(a,b)=>d3.ascending(a.name,b.name))```Thedatacomparatordefaultstonull.Ifboththedatacomparatorandthe[valuecomparator](#pie_sortValues)arenull,thenarcsarepositionedintheoriginalinputorder.Settingthedatacomparatorimplicitlysetsthevaluecomparatortonull.Sortingdoesnotaffecttheorderofthe[generatedarcarray](#_pie)whichisalwaysinthesameorderastheinputdataarray;itonlyaffectsthecomputedanglesofeacharc.Thefirstarcstartsatthe[startangle](#pie_startAngle)andthelastarcendsatthe[endangle](#pie_endAngle).##*pie*.sortValues(*compare*){#pie_sortValues}[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·If*compare*isspecified,setsthevaluecomparatortothespecifiedfunctionandreturnsthispiegenerator.```jsconstpie=d3.pie().sortValue(d3.ascending);```Thevaluecomparatorissimilartothe[datacomparator](#pie_sort),exceptthetwoarguments*a*and*b*arevaluesderivedfromtheinputdataarrayusingthe[valueaccessor](#pie_value)ratherthanthedataelements.Ifthearcfor*a*shouldbebeforethearcfor*b*,thenthecomparatormustreturnanumberlessthanzero;ifthearcfor*a*shouldbeafterthearcfor*b*,thenthecomparatormustreturnanumbergreaterthanzero;returningzeromeansthattherelativeorderof*a*and*b*isunspecified.If*compare*isnotspecified,returnsthecurrentvaluecomparator.```jspie.sortValue()//d3.ascending```Thevaluecomparatordefaultsto[descending](../d3-array/sort.md#descending).Ifboththe[datacomparator](#pie_sort)andthevaluecomparatorarenull,thenarcsarepositionedintheoriginalinputorder.Settingthevaluecomparatorimplicitlysetsthe[datacomparator](#pie_sort)tonull.Sortingdoesnotaffecttheorderofthe[generatedarcarray](#_pie)whichisalwaysinthesameorderastheinputdataarray;itmerelyaffectsthecomputedanglesofeacharc.Thefirstarcstartsatthe[startangle](#pie_startAngle)andthelastarcendsatthe[endangle](#pie_endAngle).##*pie*.startAngle(*angle*){#pie_startAngle}[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·If*angle*isspecified,setstheoverallstartangleofthepietothespecifiedfunctionornumberandreturnsthispiegenerator.```jsconstpie=d3.pie().startAngle(0);```Thestartangleisthe*overall*startangleofthepie,*i.e.*,thestartangleofthefirstarc.Itistypicallyexpressedasaconstantnumberbutcanalsobeexpressedasafunctionofdata.Whenafunction,thestartangleaccessorisinvokedonce,beingpassedthesameargumentsand`this`contextasthe[piegenerator](#_pie).If*angle*isnotspecified,returnsthecurrentstartangleaccessor.```jspie.startAngle()//()=>0```Thestartangleaccessordefaultsto:```jsfunctionstartAngle(){return0;}```Anglesareinradians,with0at-*y*(12o’clock)andpositiveanglesproceedingclockwise.##*pie*.endAngle(*angle*){#pie_endAngle}[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·If*angle*isspecified,setstheoverallendangleofthepietothespecifiedfunctionornumberandreturnsthispiegenerator.```jsconstpie=d3.pie().endAngle(Math.PI);```Theendangleheremeansthe*overall*endangleofthepie,*i.e.*,theendangleofthelastarc.Itistypicallyexpressedasaconstantnumberbutcanalsobeexpressedasafunctionofdata.Whenafunction,theendangleaccessorisinvokedonce,beingpassedthesameargumentsand`this`contextasthe[piegenerator](#_pie).If*angle*isnotspecified,returnsthecurrentendangleaccessor.```jspie.endAngle()//()=>Math.PI```Theendangleaccessordefaultsto:```jsfunctionendAngle(){return2*Math.PI;}```Anglesareinradians,with0at-*y*(12o’clock)andpositiveanglesproceedingclockwise.Thevalueoftheendangleisconstrainedto[startAngle](#pie_startAngle)± τ,suchthat|endAngle-startAngle|≤τ.##*pie*.padAngle(*angle*){#pie_padAngle}<p><labelclass="label-input"><span>Padangle:</span><inputtype="range"v-model.number="padAngle"min="0"max="0.1"step="0.001"><spanstyle="font-variant-numeric:tabular-nums;">{{padAngle.toFixed(3)}}</span></label></p><ExampleArcs:padAngle="padAngle"/>[Examples](https://observablehq.com/@d3/arc-pad-angle)·[Source](https://github.com/d3/d3-shape/blob/main/src/pie.js)·If*angle*isspecified,setsthepadangletothespecifiedfunctionornumberandreturnsthispiegenerator.```js-vueconstpie=d3.pie().padAngle({{padAngle}});```Thepadanglespecifiestheangularseparationinradiansbetweenadjacentarcs.Thetotalamountofpaddingisthespecified*angle*timesthenumberofelementsintheinputdataarray,andatmost|[endAngle](#pie_endAngle)-[startAngle](#pie_startAngle)|;theremainingspaceisdividedproportionallyby[value](#pie_value)suchthattherelativeareaofeacharcispreserved.Thepadangleistypicallyexpressedasaconstantnumberbutcanalsobeexpressedasafunctionofdata.Whenafunction,thepadangleaccessorisinvokedonce,beingpassedthesameargumentsand`this`contextasthe[piegenerator](#_pie).If*angle*isnotspecified,returnsthecurrentpadangleaccessor.```js-vuepie.padAngle()//()=>{{padAngle}}```Thepadangleaccessordefaultsto:```jsfunctionpadAngle(){return0;}```