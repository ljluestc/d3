#SelectingelementsA*selection*isasetofelementsfromtheDOM.Typicallytheseelementsareidentifiedby[selectors](http://www.w3.org/TR/selectors-api/)suchas`.fancy`forelementswiththeclass*fancy*,or`div`toselectDIVelements.Selectionmethodscomeintwoforms,**select**and**selectAll**:theformerselectsonlythefirstmatchingelement,whilethelatterselectsallmatchingelementsindocumentorder.Thetop-levelselectionmethods,[d3.select](#select)and[d3.selectAll](#selectAll),querytheentiredocument;thesubselectionmethods,[*selection*.select](#selection_select)and[*selection*.selectAll](#selection_selectAll),restrictselectiontodescendantsoftheselectedelements.Thereisalso[*selection*.selectChild](#selection_selectChild)and[*selection*.selectChildren](#selection_selectChildren)fordirectchildren.Byconvention,selectionmethodsthatreturnthecurrentselectionsuchas[*selection*.attr](./modifying.md#selection_attr)usefourspacesofindent,whilemethodsthatreturnanewselectionuseonlytwo.Thishelpsrevealchangesofcontextbymakingthemstickoutofthechain:```jsd3.select("body").append("svg").attr("width",960).attr("height",500).append("g").attr("transform","translate(20,20)").append("rect").attr("width",920).attr("height",460);```##selection(){#selection}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/index.js)·[Selects](#select)therootelement,`document.documentElement`.```jsconstroot=d3.selection();```Thisfunctioncanalsobeusedtotestforselections(`instanceofd3.selection`)ortoextendtheselectionprototype.Forexample,toaddamethodtocheckcheckboxes:```jsd3.selection.prototype.checked=function(value){returnarguments.length<1?this.property("checked"):this.property("checked",!!value);};```Andthentouse:```jsd3.selectAll("input[type=checkbox]").checked(true);```##select(*selector*){#select}[Source](https://github.com/d3/d3-selection/blob/main/src/select.js)·Selectsthefirstelementthatmatchesthespecified*selector*string.```jsconstsvg=d3.select("#chart");```Ifnoelementsmatchthe*selector*,returnsanemptyselection.Ifmultipleelementsmatchthe*selector*,onlythefirstmatchingelement(indocumentorder)willbeselected.Forexample,toselectthefirstanchorelement:```jsconstanchor=d3.select("a");```Ifthe*selector*isnotastring,insteadselectsthespecifiednode;thisisusefulifyoualreadyhaveareferencetoanode,suchas`document.body`.```jsd3.select(document.body).style("background","red");```Or,tomakeaclickedparagraphred:```jsd3.selectAll("p").on("click",(event)=>d3.select(event.currentTarget).style("color","red"));```##selectAll(*selector*){#selectAll}[Source](https://github.com/d3/d3-selection/blob/main/src/selectAll.js)·Selectsallelementsthatmatchthespecified*selector*string.```jsconstp=d3.selectAll("p");```Theelementswillbeselectedindocumentorder(top-to-bottom).Ifnoelementsinthedocumentmatchthe*selector*,orifthe*selector*isnullorundefined,returnsanemptyselection.Ifthe*selector*isnotastring,insteadselectsthespecifiedarrayofnodes;thisisusefulifyoualreadyhaveareferencetonodes,suchas`this.childNodes`withinaneventlisteneroraglobalsuchas`document.links`.Thenodesmayinsteadbeaniterable,orapseudo-arraysuchasaNodeList.Forexample,tocoloralllinksred:```jsd3.selectAll(document.links).style("color","red");```##*selection*.select(*selector*){#selection_select}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/select.js)·Foreachselectedelement,selectsthefirstdescendantelementthatmatchesthespecified*selector*string.```jsconstb=d3.selectAll("p").select("b");//thefirst<b>inevery<p>```Ifnoelementmatchesthespecifiedselectorforthecurrentelement,theelementatthecurrentindexwillbenullinthereturnedselection.(Ifthe*selector*isnull,everyelementinthereturnedselectionwillbenull,resultinginanemptyselection.)Ifthecurrentelementhasassociateddata,thisdataispropagatedtothecorrespondingselectedelement.Ifmultipleelementsmatchtheselector,onlythefirstmatchingelementindocumentorderisselected.Ifthe*selector*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Itmustreturnanelement,ornullifthereisnomatchingelement.Forexample,toselecttheprevioussiblingofeachparagraph:```jsconstprevious=d3.selectAll("p").select(function(){returnthis.previousElementSibling;});```Unlike[*selection*.selectAll](#selection_selectAll),*selection*.selectdoesnotaffectgrouping:itpreservestheexistinggroupstructureandindexes,andpropagatesdata(ifany)toselectedchildren.Groupingplaysanimportantroleinthe[datajoin](./joining.md).See[NestedSelections](http://bost.ocks.org/mike/nest/)and[HowSelectionsWork](http://bost.ocks.org/mike/selection/)formoreonthistopic.:::warningCAUTION*selection*.selectpropagatestheparent’sdatatotheselectedchild.:::##*selection*.selectAll(selector){#selection_selectAll}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/selectAll.js)·Foreachselectedelement,selectsthedescendantelementsthatmatchthespecified*selector*string.```jsconstb=d3.selectAll("p").selectAll("b");//every<b>inevery<p>```Theelementsinthereturnedselectionaregroupedbytheircorrespondingparentnodeinthisselection.Ifnoelementmatchesthespecifiedselectorforthecurrentelement,orifthe*selector*isnull,thegroupatthecurrentindexwillbeempty.Theselectedelementsdonotinheritdatafromthisselection;use[*selection*.data](./joining.md#selection_data)topropagatedatatochildren.Ifthe*selector*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Itmustreturnanarrayofelements(oraniterable,orapseudo-arraysuchasaNodeList),ortheemptyarrayiftherearenomatchingelements.Forexample,toselectthepreviousandnextsiblingsofeachparagraph:```jsconstsibling=d3.selectAll("p").selectAll(function(){return[this.previousElementSibling,this.nextElementSibling];});```Unlike[*selection*.select](#selection_select),*selection*.selectAlldoesaffectgrouping:eachselecteddescendantisgroupedbytheparentelementintheoriginatingselection.Groupingplaysanimportantroleinthe[datajoin](./joining.md).See[NestedSelections](http://bost.ocks.org/mike/nest/)and[HowSelectionsWork](http://bost.ocks.org/mike/selection/)formoreonthistopic.##*selection*.filter(*filter*){#selection_filter}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/filter.js)·Filterstheselection,returninganewselectionthatcontainsonlytheelementsforwhichthespecified*filter*istrue.Forexample,tofilteraselectionoftablerowstocontainonlyevenrows:```jsconsteven=d3.selectAll("tr").filter(":nth-child(even)");```Thisisapproximatelyequivalenttousing[d3.selectAll](#selectAll)directly,althoughtheindexesmaybedifferent:```jsconsteven=d3.selectAll("tr:nth-child(even)");```The*filter*maybespecifiedeitherasaselectorstringorafunction.Ifthe*filter*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Usingafunction:```jsconsteven=d3.selectAll("tr").filter((d,i)=>i&1);```Orusing[*selection*.select](#selection_select)(andavoidinganarrowfunction,since*this*isneededtorefertothecurrentelement):```jsconsteven=d3.selectAll("tr").select(function(d,i){returni&1?this:null;});```Notethatthe`:nth-child`pseudo-classisaone-basedindexratherthanazero-basedindex.Also,theabovefilterfunctionsdonothavepreciselythesamemeaningas`:nth-child`;theyrelyontheselectionindexratherthanthenumberofprecedingsiblingelementsintheDOM.Thereturnedfilteredselectionpreservestheparentsofthisselection,butlike[*array*.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),itdoesnotpreserveindexesassomeelementsmayberemoved;use[*selection*.select](#selection_select)topreservetheindex,ifneeded.##*selection*.selectChild(*selector*){#selection_selectChild}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/selectChild.js)·Returnsanewselectionwiththe(first)childofeachelementofthecurrentselectionmatchingthe*selector*.```jsd3.selectAll("p").selectChild("b")//thefirst<b>childofevery<p>```Ifno*selector*isspecified,selectsthefirstchild(ifany).Ifthe*selector*isspecifiedasastring,selectsthefirstchildthatmatches(ifany).Ifthe*selector*isafunction,itisevaluatedforeachofthechildrennodes,inorder,beingpassedthechild(*child*),thechild’sindex(*i*),andthelistofchildren(*children*);themethodselectsthefirstchildforwhichtheselectorreturntruthy,ifany.:::warningCAUTION*selection*.selectChildpropagatestheparent’sdatatotheselectedchild.:::##*selection*.selectChildren(*selector*){#selection_selectChildren}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/selectChildren.js)·Returnsanewselectionwiththechildrenofeachelementofthecurrentselectionmatchingthe*selector*.Ifno*selector*isspecified,selectsallthechildren.Ifthe*selector*isspecifiedasastring,selectsthechildrenthatmatch(ifany).Ifthe*selector*isafunction,itisevaluatedforeachofthechildrennodes,inorder,beingpassedthechild(*child*),thechild’sindex(*i*),andthelistofchildren(*children*);themethodselectsallchildrenforwhichtheselectorreturntruthy.##*selection*.selection(){#selection_selection}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/index.js)·Returnstheselection(forsymmetrywith[*transition*.selection](../d3-transition/selecting.md#transition_selection)).##matcher(*selector*){#matcher}[Source](https://github.com/d3/d3-selection/blob/main/src/matcher.js)·Giventhespecified*selector*,returnsafunctionwhichreturnstrueif`this`element[matches](https://developer.mozilla.org/en-US/docs/Web/API/Element/matches)thespecifiedselector.Thismethodisusedinternallyby[*selection*.filter](#selection_filter).Forexample,this:```jsconstdiv=selection.filter("div");```Isequivalentto:```jsconstdiv=selection.filter(d3.matcher("div"));```(AlthoughD3isnotacompatibilitylayer,thisimplementationdoessupportvendor-prefixedimplementationsduetotherecentstandardizationof*element*.matches.)##selector(*selector*){#selector}[Source](https://github.com/d3/d3-selection/blob/main/src/selector.js)·Giventhespecified*selector*,returnsafunctionwhichreturnsthefirstdescendantof`this`elementthatmatchesthespecifiedselector.Thismethodisusedinternallyby[*selection*.select](#selection_select).Forexample,this:```jsconstdiv=selection.select("div");```Isequivalentto:```jsconstdiv=selection.select(d3.selector("div"));```##selectorAll(*selector*){#selectorAll}[Source](https://github.com/d3/d3-selection/blob/main/src/selectAll.js)·Giventhespecified*selector*,returnsafunctionwhichreturnsalldescendantsof`this`elementthatmatchthespecifiedselector.Thismethodisusedinternallyby[*selection*.selectAll](#selection_selectAll).Forexample,this:```jsconstdiv=selection.selectAll("div");```Isequivalentto:```jsconstdiv=selection.selectAll(d3.selectorAll("div"));```##window(*node*){#window}[Source](https://github.com/d3/d3-selection/blob/main/src/window.js)·Returnstheownerwindowforthespecified*node*.If*node*isanode,returnstheownerdocument’sdefaultview;if*node*isadocument,returnsitsdefaultview;otherwisereturnsthe*node*.##style(*node*,*name*){#style}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/style.js)·Returnsthevalueofthestylepropertywiththespecified*name*forthespecified*node*.Ifthe*node*hasaninlinestylewiththespecified*name*,itsvalueisreturned;otherwise,the[computedpropertyvalue](https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value)isreturned.Seealso[*selection*.style](./modifying.md#selection_style).