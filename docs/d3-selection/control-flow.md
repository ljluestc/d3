#ControlflowForadvancedusage,selectionsprovidemethodsforcustomcontrolflow.##*selection*.each(*function*){#selection_each}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/each.js)·Invokesthespecified*function*foreachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thismethodcanbeusedtoinvokearbitrarycodeforeachselectedelement,andisusefulforcreatingacontexttoaccessparentandchilddatasimultaneously,suchas:```jsparent.each(function(p,j){d3.select(this).selectAll(".child").text(d=>`child${d.name}of${p.name}`);});```See[sizeddonutmultiples](https://observablehq.com/@d3/sized-donut-multiples)foranexample.##*selection*.call(*function*,...*arguments*){#selection_call}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/call.js)·Invokesthespecified*function*exactlyonce,passinginthisselectionalongwithanyoptional*arguments*.Returnsthisselection.Thisisequivalenttoinvokingthefunctionbyhandbutfacilitatesmethodchaining.Forexample,tosetseveralstylesinareusablefunction:```jsfunctionname(selection,first,last){selection.attr("first-name",first).attr("last-name",last);}```Nowsay:```jsd3.selectAll("div").call(name,"John","Snow");```Thisisroughlyequivalentto:```jsname(d3.selectAll("div"),"John","Snow");```Theonlydifferenceisthat*selection*.callalwaysreturnsthe*selection*andnotthereturnvalueofthecalled*function*,`name`.##*selection*.empty(){#selection_empty}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/empty.js)·Returnstrueifthisselectioncontainsno(non-null)elements.```jsd3.selectAll("p").empty()//false,here```##*selection*.nodes(){#selection_nodes}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/nodes.js)·Returnsanarrayofall(non-null)elementsinthisselection.```jsd3.selectAll("p").nodes()//[p,p,p,…]```Equivalentto:```jsArray.from(selection)```##*selection*[Symbol.iterator]\(\){#selection_iterator}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/iterator.js)·Returnsaniteratorovertheselected(non-null)elements.Forexample,toiterateovertheselectedelements:```jsfor(constelementofselection){console.log(element);}```Toflattentheselectiontoanarray:```jsconstelements=[...selection];```##*selection*.node(){#selection_node}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/node.js)·Returnsthefirst(non-null)elementinthisselection.Iftheselectionisempty,returnsnull.##*selection*.size(){#selection_size}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/size.js)·Returnsthetotalnumberof(non-null)elementsinthisselection.