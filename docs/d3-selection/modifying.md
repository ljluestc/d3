#ModifyingelementsAfterselectingelements,usetheselectiontomodifytheelements.Forexample,tosettheclassandcolorstyleofallparagraphelementsinthecurrentdocument:```jsd3.selectAll("p").attr("class","graf").style("color","red");```Selectionmethodstypicallyreturnthecurrentselection,oranewselection,allowingtheconciseapplicationofmultipleoperationsonagivenselectionviamethodchaining.Theaboveisequivalentto:```jsconstp=d3.selectAll("p");p.attr("class","graf");p.style("color","red");```Selectionsareimmutable.Allselectionmethodsthataffectwhichelementsareselected(ortheirorder)returnanewselectionratherthanmodifyingthecurrentselection.However,notethatelementsarenecessarilymutable,asselectionsdrivetransformationsofthedocument!##*selection*.attr(*name*,*value*){#selection_attr}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/attr.js)·Ifa*value*isspecified,setstheattributewiththespecified*name*tothespecifiedvalueontheselectedelementsandreturnsthisselection.```jsselection.attr("color","red")```Ifthe*value*isaconstant,allelementsaregiventhesameattributevalue;otherwise,ifthe*value*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thefunction’sreturnvalueisthenusedtoseteachelement’sattribute.Anullvaluewillremovethespecifiedattribute.```jsselection.attr("color")//"red"```Ifa*value*isnotspecified,returnsthecurrentvalueofthespecifiedattributeforthefirst(non-null)elementintheselection.Thisisgenerallyusefulonlyifyouknowthattheselectioncontainsexactlyoneelement.Thespecified*name*mayhaveanamespaceprefix,suchas`xlink:href`tospecifythe`href`attributeintheXLinknamespace.See[namespaces](./namespaces.md#namespaces)forthemapofsupportednamespaces;additionalnamespacescanberegisteredbyaddingtothemap.##*selection*.classed(*names*,*value*){#selection_classed}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/classed.js)·Ifa*value*isspecified,assignsorunassignsthespecifiedCSSclass*names*ontheselectedelementsbysettingthe`class`attributeormodifyingthe`classList`propertyandreturnsthisselection.```jsselection.classed("foo",true)```Thespecified*names*isastringofspace-separatedclassnames.Forexample,toassigntheclasses`foo`and`bar`totheselectedelements:```jsselection.classed("foobar",true)```Ifthe*value*istruthy,thenallelementsareassignedthespecifiedclasses;otherwise,theclassesareunassigned.```jsselection.classed("foo",()=>Math.random()>0.5)```Ifthe*value*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thefunction’sreturnvalueisthenusedtoassignorunassignclassesoneachelement.```jsselection.classed("foo")//true,perhaps```Ifa*value*isnotspecified,returnstrueifandonlyifthefirst(non-null)selectedelementhasthespecified*classes*.Thisisgenerallyusefulonlyifyouknowtheselectioncontainsexactlyoneelement.##*selection*.style(*name*,*value*,*priority*){#selection_style}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/style.js)·Ifa*value*isspecified,setsthestylepropertywiththespecified*name*tothespecifiedvalueontheselectedelementsandreturnsthisselection.```jsselection.style("color","red")```Ifthe*value*isaconstant,thenallelementsaregiventhesamestylepropertyvalue;otherwise,ifthe*value*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thefunction’sreturnvalueisthenusedtoseteachelement’sstyleproperty.Anullvaluewillremovethestyleproperty.Anoptional*priority*mayalsobespecified,eitherasnullorthestring`important`(withouttheexclamationpoint).```jsselection.style("color")//"red"```Ifa*value*isnotspecified,returnsthecurrentvalueofthespecifiedstylepropertyforthefirst(non-null)elementintheselection.Thecurrentvalueisdefinedastheelement’sinlinevalue,ifpresent,andotherwiseits[computedvalue](https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value).Accessingthecurrentstylevalueisgenerallyusefulonlyifyouknowtheselectioncontainsexactlyoneelement.:::warningCAUTIONUnlikemanySVGattributes,CSSstylestypicallyhaveassociatedunits.Forexample,`3px`isavalidstroke-widthpropertyvalue,while`3`isnot.Somebrowsersimplicitlyassignthe`px`(pixel)unittonumericvalues,butnotallbrowsersdo:IE,forexample,throwsan“invalidarguments”error!:::##*selection*.property(*name*,*value*){#selection_property}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/property.js)·SomeHTMLelementshavespecialpropertiesthatarenotaddressableusingattributesorstyles,suchasaformfield’stext`value`andacheckbox’s`checked`boolean.Usethismethodtogetorsettheseproperties.```jsselection.property("checked",true)```Ifa*value*isspecified,setsthepropertywiththespecified*name*tothespecifiedvalueonselectedelements.Ifthe*value*isaconstant,thenallelementsaregiventhesamepropertyvalue;otherwise,ifthe*value*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thefunction’sreturnvalueisthenusedtoseteachelement’sproperty.Anullvaluewilldeletethespecifiedproperty.```jsselection.property("checked")//true,perhaps```Ifa*value*isnotspecified,returnsthevalueofthespecifiedpropertyforthefirst(non-null)elementintheselection.Thisisgenerallyusefulonlyifyouknowtheselectioncontainsexactlyoneelement.##*selection*.text(*value*){#selection_text}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/text.js)·Ifa*value*isspecified,setsthe[textcontent](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-textContent)tothespecifiedvalueonallselectedelements,replacinganyexistingchildelements.```jsselection.text("Hello,world!")```Ifthe*value*isaconstant,thenallelementsaregiventhesametextcontent;otherwise,ifthe*value*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thefunction’sreturnvalueisthenusedtoseteachelement’stextcontent.Anullvaluewillclearthecontent.```jsselection.text()//"Hello,world!"```Ifa*value*isnotspecified,returnsthetextcontentforthefirst(non-null)elementintheselection.Thisisgenerallyusefulonlyifyouknowtheselectioncontainsexactlyoneelement.##*selection*.html(*value*){#selection_html}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/html.js)·Ifa*value*isspecified,setsthe[innerHTML](http://dev.w3.org/html5/spec-LC/apis-in-html-documents.html#innerhtml)tothespecifiedvalueonallselectedelements,replacinganyexistingchildelements.```jsselection.html("Hello,<i>world</i>!")```Ifthe*value*isaconstant,thenallelementsaregiventhesameinnerHTML;otherwise,ifthe*value*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thefunction’sreturnvalueisthenusedtoseteachelement’sinnerHTML.Anullvaluewillclearthecontent.```jsselection.html()//"Hello,<i>world</i>!"```Ifa*value*isnotspecified,returnstheinnerHTMLforthefirst(non-null)elementintheselection.Thisisgenerallyusefulonlyifyouknowtheselectioncontainsexactlyoneelement.Use[*selection*.append](#selection_append)or[*selection*.insert](#selection_insert)insteadtocreatedata-drivencontent;thismethodisintendedforwhenyouwantalittlebitofHTML,sayforrichformatting.Also,*selection*.htmlisonlysupportedonHTMLelements.SVGelementsandothernon-HTMLelementsdonotsupporttheinnerHTMLproperty,andthusareincompatiblewith*selection*.html.Considerusing[XMLSerializer](https://developer.mozilla.org/en-US/docs/XMLSerializer)toconvertaDOMsubtreetotext.Seealsothe[innersvgpolyfill](https://code.google.com/p/innersvg/),whichprovidesashimtosupporttheinnerHTMLpropertyonSVGelements.##*selection*.append(*type*){#selection_append}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/append.js)·Ifthespecified*type*isastring,appendsanewelementofthistype(tagname)asthelastchildofeachselectedelement,orbeforethenextfollowingsiblingintheupdateselectionifthisisan[enterselection](./joining.md#selection_enter).ThelatterbehaviorforenterselectionsallowsyoutoinsertelementsintotheDOMinanorderconsistentwiththenewbounddata;however,notethat[*selection*.order](#selection_order)maystillberequiredifupdatingelementschangeorder(*i.e.*,iftheorderofnewdataisinconsistentwitholddata).Ifthespecified*type*isafunction,itisevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).Thisfunctionshouldreturnanelementtobeappended.(Thefunctiontypicallycreatesanewelement,butitmayinsteadreturnanexistingelement.)Forexample,toappendaparagraphtoeachDIVelement:```jsd3.selectAll("div").append("p");```Thisisequivalentto:```jsd3.selectAll("div").append(()=>document.createElement("p"));```Whichisequivalentto:```jsd3.selectAll("div").select(function(){returnthis.appendChild(document.createElement("p"));});```Inbothcases,thismethodreturnsanewselectioncontainingtheappendedelements.Eachnewelementinheritsthedataofthecurrentelements,ifany,inthesamemanneras[*selection*.select](./selecting.md#selection_select).Thespecified*name*mayhaveanamespaceprefix,suchas`svg:text`tospecifya`text`attributeintheSVGnamespace.See[namespaces](./namespaces.md#namespaces)forthemapofsupportednamespaces;additionalnamespacescanberegisteredbyaddingtothemap.Ifnonamespaceisspecified,thenamespacewillbeinheritedfromtheparentelement;or,ifthenameisoneoftheknownprefixes,thecorrespondingnamespacewillbeused(forexample,`svg`implies`svg:svg`).##*selection*.insert(*type*,*before*){#selection_insert}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/insert.js)·Ifthespecified*type*isastring,insertsanewelementofthistype(tagname)beforethefirstelementmatchingthespecified*before*selectorforeachselectedelement.Forexample,a*before*selector`:first-child`willprependnodesbeforethefirstchild.If*before*isnotspecified,itdefaultstonull.(Toappendelementsinanorderconsistentwith[bounddata](./joining.md),use[*selection*.append](#selection_append).)Both*type*and*before*mayinsteadbespecifiedasfunctionswhichareevaluatedforeachselectedelement,inorder,beingpassedthecurrentdatum(*d*),thecurrentindex(*i*),andthecurrentgroup(*nodes*),with*this*asthecurrentDOMelement(*nodes*[*i*]).The*type*functionshouldreturnanelementtobeinserted;the*before*functionshouldreturnthechildelementbeforewhichtheelementshouldbeinserted.Forexample,toappendaparagraphtoeachDIVelement:```jsd3.selectAll("div").insert("p");```Thisisequivalentto:```jsd3.selectAll("div").insert(()=>document.createElement("p"));```Whichisequivalentto:```jsd3.selectAll("div").select(function(){returnthis.insertBefore(document.createElement("p"),null);});```Inbothcases,thismethodreturnsanewselectioncontainingtheappendedelements.Eachnewelementinheritsthedataofthecurrentelements,ifany,inthesamemanneras[*selection*.select](./selecting.md#selection_select).Thespecified*name*mayhaveanamespaceprefix,suchas`svg:text`tospecifya`text`attributeintheSVGnamespace.See[namespaces](./namespaces.md#namespaces)forthemapofsupportednamespaces;additionalnamespacescanberegisteredbyaddingtothemap.Ifnonamespaceisspecified,thenamespacewillbeinheritedfromtheparentelement;or,ifthenameisoneoftheknownprefixes,thecorrespondingnamespacewillbeused(forexample,`svg`implies`svg:svg`).##*selection*.remove(){#selection_remove}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/remove.js)·Removestheselectedelementsfromthedocument.Returnsthisselection(theremovedelements)whicharenowdetachedfromtheDOM.ThereisnotcurrentlyadedicatedAPItoaddremovedelementsbacktothedocument;however,youcanpassafunctionto[*selection*.append](#selection_append)or[*selection*.insert](#selection_insert)tore-addelements.##*selection*.clone(*deep*){#selection_clone}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/clone.js)·Insertsclonesoftheselectedelementsimmediatelyfollowingtheselectedelementsandreturnsaselectionofthenewlyaddedclones.If*deep*istruthy,thedescendantnodesoftheselectedelementswillbeclonedaswell.Otherwise,onlytheelementsthemselveswillbecloned.Equivalentto:```jsselection.select(function(){returnthis.parentNode.insertBefore(this.cloneNode(deep),this.nextSibling);});```##*selection*.sort(*compare*){#selection_sort}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/sort.js)·Returnsanewselectionthatcontainsacopyofeachgroupinthisselectionsortedaccordingtothe*compare*function.Aftersorting,re-insertselementstomatchtheresultingorder(per[*selection*.order](#selection_order)).Thecomparefunction,whichdefaultsto[ascending](../d3-array/sort.md#ascending),ispassedtwoelements’data*a*and*b*tocompare.Itshouldreturneitheranegative,positive,orzerovalue.Ifnegative,then*a*shouldbebefore*b*;ifpositive,then*a*shouldbeafter*b*;otherwise,*a*and*b*areconsideredequalandtheorderisarbitrary.##*selection*.order(){#selection_order}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/order.js)·Re-insertselementsintothedocumentsuchthatthedocumentorderofeachgroupmatchestheselectionorder.Thisisequivalenttocalling[*selection*.sort](#selection_sort)ifthedataisalreadysorted,butmuchfaster.##*selection*.raise(){#selection_raise}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/raise.js)·Re-insertseachselectedelement,inorder,asthelastchildofitsparent.Equivalentto:```jsselection.each(function(){this.parentNode.appendChild(this);});```##*selection*.lower(){#selection_lower}[Source](https://github.com/d3/d3-selection/blob/main/src/selection/lower.js)·Re-insertseachselectedelement,inorder,asthefirstchildofitsparent.Equivalentto:```jsselection.each(function(){this.parentNode.insertBefore(this,this.parentNode.firstChild);});```##create(*name*){#create}[Source](https://github.com/d3/d3-selection/blob/main/src/create.js)·Giventhespecifiedelement*name*,returnsasingle-elementselectioncontainingadetachedelementofthegivennameinthecurrentdocument.ThismethodassumestheHTMLnamespace,soyoumustspecifyanamespaceexplicitlywhencreatingSVGorothernon-HTMLelements;see[namespace](./namespaces.md#namespace)fordetailsonsupportednamespaceprefixes.```jsd3.create("svg")//equivalenttosvg:svg``````jsd3.create("svg:svg")//moreexplicitly``````jsd3.create("svg:g")//anSVGGelement``````jsd3.create("g")//anHTMLG(unknown)element```##creator(*name*){#creator}[Source](https://github.com/d3/d3-selection/blob/main/src/creator.js)·Giventhespecifiedelement*name*,returnsafunctionwhichcreatesanelementofthegivenname,assumingthat`this`istheparentelement.Thismethodisusedinternallyby[*selection*.append](#selection_append)and[*selection*.insert](#selection_insert)tocreatenewelements.Forexample,this:```jsselection.append("div");```Isequivalentto:```jsselection.append(d3.creator("div"));```See[namespace](./namespaces.md#namespace)fordetailsonsupportednamespaceprefixes,suchasforSVGelements.