<scriptsetup>import*asd3from"d3";importColorRampfrom"../components/ColorRamp.vue";importColorSwatchesfrom"../components/ColorSwatches.vue";</script>#ValueinterpolationThesearethemostgeneralinterpolators,suitableformostvalues.##interpolate(*a*,*b*){#interpolate}[Examples](https://observablehq.com/@d3/d3-interpolate)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/value.js)·Returnsaninterpolatorbetweenthetwoarbitraryvalues*a*and*b*.```jsd3.interpolate("red","blue")(0.5)//"rgb(128,0,128)"```Theinterpolatorimplementationisbasedonthetypeoftheendvalue*b*,usingthefollowingalgorithm:1.If*b*isnull,undefinedoraboolean,usetheconstant*b*.2.If*b*isanumber,use[interpolateNumber](#interpolateNumber).3.If*b*isa[color](../d3-color.md#color)orastringcoercibletoacolor,use[interpolateRgb](./color.md#interpolateRgb).4.If*b*isa[date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date),use[interpolateDate](#interpolateDate).5.If*b*isastring,use[interpolateString](#interpolateString).6.If*b*isa[typedarray](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray)ofnumbers,use[interpolateNumberArray](#interpolateNumberArray).7.If*b*isageneric[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray),use[interpolateArray](#interpolateArray).8.If*b*iscoercibletoanumber,use[interpolateNumber](#interpolateNumber).9.Use[interpolateObject](#interpolateObject).Basedonthechoseninterpolator,*a*iscoercedtothesuitablecorrespondingtype.##interpolateNumber(*a*,*b*){#interpolateNumber}[Examples](https://observablehq.com/@d3/d3-interpolatenumber)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/number.js)·Returnsaninterpolatorbetweenthetwonumbers*a*and*b*.```jsd3.interpolateNumber(20,620)(0.8)//500```Thereturnedinterpolatorisequivalentto:```jsfunctioninterpolator(t){returna*(1-t)+b*t;}```:::warningCAUTIONAvoidinterpolatingtoorfromthenumberzerowhentheinterpolatorisusedtogenerateastring.Whenverysmallvaluesarestringified,theymaybeconvertedtoscientificnotation,whichisaninvalidattributeorstylepropertyvalueinolderbrowsers.Forexample,thenumber`0.0000001`isconvertedtothestring`"1e-7"`.Thisisparticularlynoticeablewithinterpolatingopacity.Toavoidscientificnotation,startorendthetransitionat1e-6:thesmallestvaluethatisnotstringifiedinscientificnotation.:::##interpolateRound(*a*,*b*){#interpolateRound}[Examples](https://observablehq.com/@d3/d3-interpolatenumber)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/round.js)·Returnsaninterpolatorbetweenthetwonumbers*a*and*b*.```jsd3.interpolateNumber(20,620)(0.821)//513```Theinterpolatorissimilarto[interpolateNumber](#interpolateNumber)exceptitwillroundtheresultingvaluetothenearestinteger.##interpolateString(*a*,*b*){#interpolateString}[Examples](https://observablehq.com/@d3/d3-interpolatestring)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/string.js)·Returnsaninterpolatorbetweenthetwostrings*a*and*b*.```jsd3.interpolateString("20px","32px")(0.5)//"26px"```Thestringinterpolatorfindsnumbersembeddedin*a*and*b*,whereeachnumberisoftheformunderstoodbyJavaScript.Afewexamplesofnumbersthatwillbedetectedwithinastring:`-1`,`42`,`3.14159`,and`6.0221413e+23`.Foreachnumberembeddedin*b*,theinterpolatorwillattempttofindacorrespondingnumberin*a*.Ifacorrespondingnumberisfound,anumericinterpolatoriscreatedusing[interpolateNumber](#interpolateNumber).Theremainingpartsofthestring*b*areusedasatemplate:thestaticpartsofthestring*b*remainconstantfortheinterpolation,withtheinterpolatednumericvaluesembeddedinthetemplate.Forexample,if*a*is`"30012pxsans-serif"`,and*b*is`"50036pxComic-Sans"`,twoembeddednumbersarefound.Theremainingstaticparts(ofstring*b*)areaspacebetweenthetwonumbers(`""`),andthesuffix(`"pxComic-Sans"`).Theresultoftheinterpolatorat*t*=0.5is`"40024pxComic-Sans"`.##interpolateDate(*a*,*b*){#interpolateDate}[Examples](https://observablehq.com/@d3/d3-interpolatedate)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/date.js)·Returnsaninterpolatorbetweenthetwo[dates](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)*a*and*b*.```jsd3.interpolateDate(newDate("2014-01-01"),newDate("2024-01-01"))(0.5)//2019-01-01```:::warningCAUTION**Nodefensivecopy**ofthereturneddateiscreated;thesameDateinstanceisreturnedforeveryevaluationoftheinterpolator.Nocopyismadeforperformancereasons,asinterpolatorsareoftenpartoftheinnerloopof[animatedtransitions](../d3-transition.md).:::##interpolateArray(*a*,*b*){#interpolateArray}[Examples](https://observablehq.com/@d3/d3-interpolateobject)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/array.js)·Returnsaninterpolatorbetweenthetwoarrays*a*and*b*.```jsd3.interpolateArray([0,0,0],[1,2,3])(0.5)//[0.5,1,1.5]```If*b*isatypedarray(e.g.,Float64Array),[interpolateNumberArray](#interpolateNumberArray)iscalledinstead.Internally,anarraytemplateiscreatedthatisthesamelengthas*b*.Foreachelementin*b*,ifthereexistsacorrespondingelementin*a*,agenericinterpolatoriscreatedforthetwoelementsusing[interpolate](#interpolate).Ifthereisnosuchelement,thestaticvaluefrom*b*isusedinthetemplate.Then,forthegivenparameter*t*,thetemplate’sembeddedinterpolatorsareevaluated.Theupdatedarraytemplateisthenreturned.Forexample,if*a*isthearray`[0,1]`and*b*isthearray`[1,10,100]`,thentheresultoftheinterpolatorfor*t*=0.5isthearray`[0.5,5.5,100]`.:::warningCAUTION**Nodefensivecopy**ofthetemplatearrayiscreated;modificationsofthereturnedarraymayadverselyaffectsubsequentevaluationoftheinterpolator.Nocopyismadeforperformancereasons;interpolatorsareoftenpartoftheinnerloopof[animatedtransitions](../d3-transition.md).:::##interpolateNumberArray(*a*,*b*){#interpolateNumberArray}[Examples](https://observablehq.com/@d3/d3-interpolatenumberarray)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/numberArray.js)·Returnsaninterpolatorbetweenthetwoarraysofnumbers*a*and*b*.```jsd3.interpolateNumberArray([0,1],Float64Array.of(1,3))(0.5)//[0.5,2]```Internally,anarraytemplateiscreatedthatisthesametypeandlengthas*b*.Foreachelementin*b*,ifthereexistsacorrespondingelementin*a*,thevaluesaredirectlyinterpolatedinthearraytemplate.Ifthereisnosuchelement,thestaticvaluefrom*b*iscopied.Theupdatedarraytemplateisthenreturned.:::warningCAUTION**Nodefensivecopy**ismadeofthetemplatearrayandthearguments*a*and*b*;modificationsofthesearraysmayaffectsubsequentevaluationoftheinterpolator.:::##interpolateObject(*a*,*b*){#interpolateObject}[Examples](https://observablehq.com/@d3/d3-interpolateobject)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/object.js)·Returnsaninterpolatorbetweenthetwoobjects*a*and*b*.```jsd3.interpolateObject({x:0,y:1},{x:1,y:10,z:100})(0.5)//{x:0.5,y:5.5,z:100}```Internally,anobjecttemplateiscreatedthathasthesamepropertiesas*b*.Foreachpropertyin*b*,ifthereexistsacorrespondingpropertyin*a*,agenericinterpolatoriscreatedforthetwoelementsusing[interpolate](#interpolate).Ifthereisnosuchproperty,thestaticvaluefrom*b*isusedinthetemplate.Then,forthegivenparameter*t*,thetemplate'sembeddedinterpolatorsareevaluatedandtheupdatedobjecttemplateisthenreturned.Forexample,if*a*istheobject`{x:0,y:1}`and*b*istheobject`{x:1,y:10,z:100}`,theresultoftheinterpolatorfor*t*=0.5istheobject`{x:0.5,y:5.5,z:100}`.Objectinterpolationisparticularlyusefulfor*dataspaceinterpolation*,wheredataisinterpolatedratherthanattributevalues.Forexample,youcaninterpolateanobjectwhichdescribesanarcinapiechart,andthenuse[arc](../d3-shape/arc.md)tocomputethenewSVGpathdata.:::warningCAUTION**Nodefensivecopy**ofthetemplateobjectiscreated;modificationsofthereturnedobjectmayadverselyaffectsubsequentevaluationoftheinterpolator.Nocopyismadeforperformancereasons;interpolatorsareoftenpartoftheinnerloopof[animatedtransitions](../d3-transition.md).:::##interpolateBasis(*values*){#interpolateBasis}[Examples](https://observablehq.com/@d3/d3-interpolatebasis)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/basis.js)·ReturnsauniformnonrationalB-splineinterpolatorthroughthespecifiedarrayof*values*,whichmustbenumbers.```jsd3.interpolateBasis([0,0.1,0.4,1])(0.5)//0.2604166666666667```Implicitcontrolpointsaregeneratedsuchthattheinterpolatorreturns*values*[0]at*t*=0and*values*[*values*.length-1]at*t*=1.Seealso[curveBasis](../d3-shape/curve.md#curveBasis)and[interpolateRgbBasis](./color.md#interpolateRgbBasis).##interpolateBasisClosed(*values*){#interpolateBasisClosed}[Examples](https://observablehq.com/@d3/d3-interpolatebasis)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/basisClosed.js)·ReturnsauniformnonrationalB-splineinterpolatorthroughthespecifiedarrayof*values*,whichmustbenumbers.```jsd3.interpolateBasisClosed([0,0.1,0.4,1])(0.5)//0.45```Thecontrolpointsareimplicitlyrepeatedsuchthattheresultingone-dimensionalsplinehascyclicalC²continuitywhenrepeatedaround*t*in[0,1].Seealso[curveBasisClosed](../d3-shape/curve.md#curveBasisClosed)and[interpolateRgbBasisClosed](./color.md#interpolateRgbBasisClosed).##interpolateDiscrete(*values*){#interpolateDiscrete}[Examples](https://observablehq.com/@d3/d3-interpolatediscrete)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/discrete.js)·Returnsadiscreteinterpolatorforthegivenarrayof*values*.```jsd3.interpolateDiscrete(["red","blue","green"])(0.5)//"blue"```Thereturnedinterpolatormaps*t*in[0,1/*n*)to*values*[0],*t*in[1/*n*,2/*n*)to*values*[1],andsoon,where*n*=*values*.length.Ineffect,thisisalightweight[quantizescale](../d3-scale/quantize.md)withafixeddomainof[0,1].##quantize(*interpolator*,*n*){#quantize}[Examples](https://observablehq.com/@d3/d3-quantize)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/quantize.js)·Returns*n*uniformly-spacedsamplesfromthespecified*interpolator*,where*n*isanintegergreaterthanone.<ColorSwatches:colors="d3.quantize(d3.interpolate('red','blue'),4)"/>```jsd3.quantize(d3.interpolate("red","blue"),4)//["rgb(255,0,0)","rgb(170,0,85)","rgb(85,0,170)","rgb(0,0,255)"]```Thefirstsampleisalwaysat*t*=0,andthelastsampleisalwaysat*t*=1.Thiscanbeusefulingeneratingafixednumberofsamplesfromagiveninterpolator,suchastoderivetherangeofa[quantizescale](../d3-scale/quantize.md)froma[continuousinterpolator](../d3-scale-chromatic/sequential.md#interpolateWarm).:::warningCAUTIONThismethodwillnotworkwithinterpolatorsthatdonotreturndefensivecopiesoftheiroutput,suchas[interpolateArray](#interpolateArray),[interpolateDate](#interpolateDate)and[interpolateObject](#interpolateObject).Forthoseinterpolators,youmustwraptheinterpolatorandcreateacopyforeachreturnedvalue.:::##piecewise(*interpolate*,*values*){#piecewise}[Examples](https://observablehq.com/@d3/d3-piecewise)·[Source](https://github.com/d3/d3-interpolate/blob/main/src/piecewise.js)·Returnsapiecewiseinterpolator,composinginterpolatorsforeachadjacentpairof*values*.<ColorRamp:color="d3.piecewise(d3.interpolateRgb.gamma(2.2),['red','green','blue'])"/>```jsd3.piecewise(d3.interpolateRgb.gamma(2.2),["red","green","blue"])```If*interpolate*isnotspecified,defaultsto[interpolate](#interpolate).<ColorRamp:color="d3.piecewise(['red','green','blue'])"/>```jsd3.piecewise(["red","green","blue"])```Thereturnedinterpolatormaps*t*in[0,1/(*n*-1)]to*interpolate*(*values*[0],*values*[1]),*t*in[1/(*n*-1),2/(*n*-1)]to*interpolate*(*values*[1],*values*[2]),andsoon,where*n*=*values*.length.Ineffect,thisisalightweight[linearscale](../d3-scale/linear.md).