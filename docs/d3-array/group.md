#GroupingdataGroupdiscretevalues.##group(*iterable*,...*keys*){#group}[Examples](https://observablehq.com/@d3/d3-group-d3-rollup)·[Source](https://github.com/d3/d3-array/blob/main/src/group.js)·Groupsthespecified*iterable*ofvaluesintoan[InternMap](./intern.md#InternMap)from*key*toarrayofvalue.Forexample,togroupthe[*penguins*sampledataset](https://observablehq.com/@observablehq/sample-datasets#penguins)by*species*field:```jsconstspecies=d3.group(penguins,(d)=>d.species);```Togettheelementswhose*species*fieldis*Adelie*:```jsspecies.get("Adelie")//Array(152)```Ifmorethanone*key*isspecified,anestedInternMapisreturned.Forexample:```jsconstspeciesSex=d3.group(penguins,(d)=>d.species,(d)=>d.sex)```Togetthepenguinswhosespeciesis*Adelie*andwhosesexis*FEMALE*:```jsspeciesSex.get("Adelie").get("FEMALE")//Array(73)```Elementsarereturnedintheorderofthefirstinstanceofeach*key*.##groups(*iterable*,...*keys*){#groups}```jsconstspecies=d3.groups(penguins,(d)=>d.species);//[["Adelie",Array(152)],…]```Equivalentto[group](#group),butreturnsanarrayof[*key*,*value*]entriesinsteadofamap.Ifmorethanone*key*isspecified,each*value*willbeanestedarrayof[*key*,*value*]entries.Elementsarereturnedintheorderofthefirstinstanceofeach*key*.##rollup(*iterable*,*reduce*,...*keys*){#rollup}[Examples](https://observablehq.com/@d3/d3-group-d3-rollup)·[Source](https://github.com/d3/d3-array/blob/main/src/group.js)·Groupsandreducesthespecified*iterable*ofvaluesintoan[InternMap](./intern.md#InternMap)from*key*toreducedvalue.Forexample,togroupandcountthe[*penguins*sampledataset](https://observablehq.com/@observablehq/sample-datasets#penguins)by*species*field:```jsconstspeciesCount=d3.rollup(penguins,(D)=>D.length,(d)=>d.species);```Togetthecountofpenguinswhosespeciesis*Adelie*:```jsspeciesCount.get("Adelie")//152```Ifmorethanone*key*isspecified,anestedInternMapisreturned.Forexample:```jsconstspeciesSexCount=d3.rollup(penguins,(D)=>D.length,(d)=>d.species,(d)=>d.sex);```Togetthecountofpenguinswhosespeciesis*Adelie*andwhosesexis*FEMALE*:```jsspeciesSexCount.get("Adelie").get("FEMALE")//73```Elementsarereturnedintheorderofthefirstinstanceofeach*key*.##rollups(*iterable*,*reduce*,...*keys*){#rollups}```jsconstspeciesCounts=d3.rollups(penguins,(D)=>D.length,(d)=>d.species);//[["Adelie",152],…]```Equivalentto[rollup](#rollup),butreturnsanarrayof[*key*,*value*]entriesinsteadofamap.Ifmorethanone*key*isspecified,each*value*willbeanestedarrayof[*key*,*value*]entries.Elementsarereturnedintheorderofthefirstinstanceofeach*key*.##index(*iterable*,...*keys*){#index}Uses[rollup](#rollup)withareducerthatextractsthefirstelementfromeachgroup,andthrowsanerrorifthegrouphasmorethanoneelement.Forexample,toindexthe[*aapl*samedataset](https://observablehq.com/@observablehq/sample-datasets#aapl)bydate:```jsconstaaplDate=d3.index(aapl,(d)=>d.Date);```Youcanthenquicklyretrieveavaluebydate:```jsaaplDate.get(newDate("2013-12-31")).Close//80.145714```Elementsarereturnedininputorder.##indexes(*iterable*,...*keys*){#indexes}Like[index](#index),butreturnsanarrayof[*key*,*value*]entriesinsteadofamap.Thisprobablyisn’tusefulforanything,butisincludedforsymmetrywith[groups](#groups)and[rollups](#rollups).##flatGroup(*iterable*,...*keys*){#flatGroup}[Examples](https://observablehq.com/@d3/d3-flatgroup)·[Source](https://github.com/d3/d3-array/blob/main/src/group.js)·Equivalentto[group](#group),butreturnsaflatarrayof[*key0*,*key1*,…,*values*]insteadofnestedmaps;usefulforiteratingoverallgroups.##flatRollup(*iterable*,*reduce*,...*keys*){#flatRollup}[Examples](https://observablehq.com/@d3/d3-flatgroup)·[Source](https://github.com/d3/d3-array/blob/main/src/group.js)·Equivalentto[rollup](#rollup),butreturnsaflatarrayof[*key0*,*key1*,…,*value*]insteadofnestedmaps;usefulforiteratingoverallgroups.##groupSort(*iterable*,*comparator*,*key*){#groupSort}[Examples](https://observablehq.com/@d3/d3-groupsort)·[Source](https://github.com/d3/d3-array/blob/main/src/groupSort.js)·Groupsthespecified*iterable*ofelementsaccordingtothespecified*key*function,sortsthegroupsaccordingtothespecified*comparator*,andthenreturnsanarrayofkeysinsortedorder.Forexample,toorderthespeciesofthe[*penguins*sampledataset](https://observablehq.com/@observablehq/sample-datasets#penguins)byascendingmedianbodymass:```jsd3.groupSort(penguins,(D)=>d3.median(D,(d)=>d.body_mass_g),(d)=>d.species)//["Adelie","Chinstrap","Gentoo"]```Fordescendingorder,negatethegroupvalue:```jsd3.groupSort(penguins,(D)=>-d3.median(D,(d)=>d.body_mass_g),(d)=>d.species)//["Gentoo","Adelie","Chinstrap"]```Ifa*comparator*ispassedinsteadofan*accessor*(*i.e.*,ifthesecondargumentisafunctionthattakesexactlytwoarguments),itwillbeaskedtocomparetwogroups*a*and*b*andshouldreturnanegativevalueif*a*shouldbebefore*b*,apositivevalueif*a*shouldbeafter*b*,orzeroforapartialordering.